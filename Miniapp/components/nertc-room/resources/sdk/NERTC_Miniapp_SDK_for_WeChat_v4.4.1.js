module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=66)}([function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(36)("wks"),i=n(23),o=n(0).Symbol,s="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(8);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(68),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){var r=n(0),i=n(2),o=n(14),s=n(10),u=n(11),a=function(e,t,n){var c,l,f,p=e&a.F,d=e&a.G,h=e&a.S,v=e&a.P,g=e&a.B,m=e&a.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,_=d?r:h?r[t]:(r[t]||{}).prototype;for(c in d&&(n=t),n)(l=!p&&_&&void 0!==_[c])&&u(y,c)||(f=l?_[c]:n[c],y[c]=d&&"function"!=typeof _[c]?n[c]:g&&l?o(f,r):m&&_[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):v&&"function"==typeof f?o(Function.call,f):f,v&&((y.virtual||(y.virtual={}))[c]=f,e&a.R&&b&&!b[c]&&s(b,c,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t,n){var r=n(3),i=n(45),o=n(30),s=Object.defineProperty;t.f=n(9)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(21)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(7),i=n(22);e.exports=n(9)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(71)),i=s(n(83)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,n){var r=n(76),i=n(32);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(20);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t){e.exports=!0},function(e,t){e.exports={}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";t.__esModule=!0;var r=s(n(92)),i=s(n(96)),o=s(n(12));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(7).f,i=n(11),o=n(1)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(4)),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){(0,r.default)(this,e),this.eventReset()}return(0,i.default)(e,[{key:"eventReset",value:function(){var e=this;this._eventListeners&&Object.keys(this._eventListeners).forEach((function(t){delete e._eventListeners[t]})),this._eventListeners={},this._eventOnceListener&&Object.keys(this._eventOnceListener).forEach((function(t){delete e._eventOnceListener[t]})),this._eventOnceListener={}}},{key:"on",value:function(e,t){if(!e)throw Error({message:"event listener funkey undefined",callFunc:"adapter:_on"});if(!(t instanceof Function))throw Error({message:"event listener next param should be function",callFunc:"adapter:_on"});this._eventListeners[e]=t}},{key:"off",value:function(e){if(!e)throw Error({message:"event listener funkey undefined",callFunc:"adapter:_off"});if(!this._eventListeners[e])throw Error({message:"event listener unbind failed!",callFunc:"adapter:_off"});delete this._eventListeners[e]}},{key:"once",value:function(e,t){if(!e)throw Error({message:"event once listener funkey undefined",callFunc:"adapter:_once"});if(!(t instanceof Function))throw Error({message:"event once listener next param should be function",callFunc:"adapter:_once"});this._eventOnceListener[e]=t}},{key:"emit",value:function(e,t){var n=this;this._eventOnceListener&&this._eventOnceListener[e]instanceof Function&&setTimeout((function(){n._eventOnceListener[e](t),delete n._eventOnceListener[e]}),0),this._eventListeners&&this._eventListeners[e]instanceof Function&&setTimeout((function(){n._eventListeners[e]&&n._eventListeners[e](t)}),0)}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r};var s,u={post:function(e,t){return this.verifyOptions(t,"url"),new Promise((function(n,r){"qq"===t.runtimeEnvironment?qq.request({url:t.url,method:"post",data:e,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var t=e.data;n(t)},fail:function(e){r(e)}}):wx.request({url:t.url,method:"post",data:e,header:{"content-type":"application/x-www-form-urlencoded"},success:function(e){var t=e.data;n(t)},fail:function(e){r(e)}})}))},merge:function(){var e=arguments;return e[0]=Object.assign.apply(Object.assign,arguments),e[0]},verifyOptions:function(){var e=arguments;if(e[0]&&e[0].constructor===Object)for(var t=1;t<arguments.length;t++){var n=e[t];(n=n.split(" ")).map((function(t){if(!e[0][t]&&0!=e[0][t])throw Error("参数缺失 "+t)}))}},deepClone:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e)"object"===(0,o.default)(e[n])?(t[n]=e[n].constructor===Array?[]:{},this.deepClone(e[n],t[n])):t[n]=e[n];return t},guid:(s=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return s()+s()+s()+s()+s()+s()+s()+s()}),uuid:function(){var e=function(){return(1e5*(1+Math.random())|0).toString(10).substring(1)};return function(){return e()+e()+e()}}(),isString:function(e){return e.constructor===String},isNumber:function(e){return e.constructor===Number},isBoolean:function(e){return e.constructor===Boolean},isObject:function(e){return e.constructor===Object},isArray:function(e){return e.constructor===Array},isFunction:function(e){return e.constructor===Function},isDate:function(e){return e.constructor===Date},isRegExp:function(e){return e.constructor===RegExp},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},exist:function(e){return!isNull(e)&&!isUndefined(e)}};t.default=u,e.exports=t.default},function(e,t,n){var r;!function(i){"use strict";var o,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,u=Math.ceil,a=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",f=1e14,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e9;function h(e){var t=0|e;return e>0||e===t?t:t-1}function v(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(n=14-(t=e[r++]+"").length;n--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function g(e,t){var n,r,i=e.c,o=t.c,s=e.s,u=t.s,a=e.e,c=t.e;if(!s||!u)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-u:s;if(s!=u)return s;if(n=s<0,r=a==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return a>c^n?1:-1;for(u=(a=i.length)<(c=o.length)?a:c,s=0;s<u;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return a==c?0:a>c^n?1:-1}function m(e,t,n,r){if(e<t||e>n||e!==a(e))throw Error(c+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function y(e){var t=e.c.length-1;return h(e.e/14)==t&&e.c[t]%2!=0}function b(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function _(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(++t>(r=e.length)){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}(o=function e(t){var n,r,i,o,w,O,k,S,E,N=B.prototype={constructor:B,toString:null,valueOf:null},T=new B(1),x=20,C=4,R=-7,A=21,P=-1e7,L=1e7,j=!1,M=1,I=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz";function B(e,t){var n,o,u,c,f,p,d,h,v=this;if(!(v instanceof B))return new B(e,t);if(null==t){if(e&&!0===e._isBigNumber)return v.s=e.s,void(!e.c||e.e>L?v.c=v.e=null:e.e<P?v.c=[v.e=0]:(v.e=e.e,v.c=e.c.slice()));if((p="number"==typeof e)&&0*e==0){if(v.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,f=e;f>=10;f/=10,c++);return void(c>L?v.c=v.e=null:(v.e=c,v.c=[e]))}h=String(e)}else{if(!s.test(h=String(e)))return i(v,h,p);v.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(c=h.indexOf("."))>-1&&(h=h.replace(".","")),(f=h.search(/e/i))>0?(c<0&&(c=f),c+=+h.slice(f+1),h=h.substring(0,f)):c<0&&(c=h.length)}else{if(m(t,2,F.length,"Base"),10==t)return G(v=new B(e),x+v.e+1,C);if(h=String(e),p="number"==typeof e){if(0*e!=0)return i(v,h,p,t);if(v.s=1/e<0?(h=h.slice(1),-1):1,B.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(l+e)}else v.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(n=F.slice(0,t),c=f=0,d=h.length;f<d;f++)if(n.indexOf(o=h.charAt(f))<0){if("."==o){if(f>c){c=d;continue}}else if(!u&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){u=!0,f=-1,c=0;continue}return i(v,String(e),p,t)}p=!1,(c=(h=r(h,t,10,v.s)).indexOf("."))>-1?h=h.replace(".",""):c=h.length}for(f=0;48===h.charCodeAt(f);f++);for(d=h.length;48===h.charCodeAt(--d););if(h=h.slice(f,++d)){if(d-=f,p&&B.DEBUG&&d>15&&(e>9007199254740991||e!==a(e)))throw Error(l+v.s*e);if((c=c-f-1)>L)v.c=v.e=null;else if(c<P)v.c=[v.e=0];else{if(v.e=c,v.c=[],f=(c+1)%14,c<0&&(f+=14),f<d){for(f&&v.c.push(+h.slice(0,f)),d-=14;f<d;)v.c.push(+h.slice(f,f+=14));f=14-(h=h.slice(f)).length}else f-=d;for(;f--;h+="0");v.c.push(+h)}}else v.c=[v.e=0]}function U(e,t,n,r){var i,o,s,u,a;if(null==n?n=C:m(n,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)a=v(e.c),a=1==r||2==r&&(s<=R||s>=A)?b(a,s):_(a,s,"0");else if(o=(e=G(new B(e),t,n)).e,u=(a=v(e.c)).length,1==r||2==r&&(t<=o||o<=R)){for(;u<t;a+="0",u++);a=b(a,o)}else if(t-=s,a=_(a,o,"0"),o+1>u){if(--t>0)for(a+=".";t--;a+="0");}else if((t+=o-u)>0)for(o+1==u&&(a+=".");t--;a+="0");return e.s<0&&i?"-"+a:a}function q(e,t){for(var n,r=1,i=new B(e[0]);r<e.length;r++){if(!(n=new B(e[r])).s){i=n;break}t.call(i,n)&&(i=n)}return i}function V(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+14*n-1)>L?e.c=e.e=null:n<P?e.c=[e.e=0]:(e.e=n,e.c=t),e}function G(e,t,n,r){var i,o,s,c,l,d,h,v=e.c,g=p;if(v){e:{for(i=1,c=v[0];c>=10;c/=10,i++);if((o=t-i)<0)o+=14,s=t,h=(l=v[d=0])/g[i-s-1]%10|0;else if((d=u((o+1)/14))>=v.length){if(!r)break e;for(;v.length<=d;v.push(0));l=h=0,i=1,s=(o%=14)-14+1}else{for(l=c=v[d],i=1;c>=10;c/=10,i++);h=(s=(o%=14)-14+i)<0?0:l/g[i-s-1]%10|0}if(r=r||t<0||null!=v[d+1]||(s<0?l:l%g[i-s-1]),r=n<4?(h||r)&&(0==n||n==(e.s<0?3:2)):h>5||5==h&&(4==n||r||6==n&&(o>0?s>0?l/g[i-s]:0:v[d-1])%10&1||n==(e.s<0?8:7)),t<1||!v[0])return v.length=0,r?(t-=e.e+1,v[0]=g[(14-t%14)%14],e.e=-t||0):v[0]=e.e=0,e;if(0==o?(v.length=d,c=1,d--):(v.length=d+1,c=g[14-o],v[d]=s>0?a(l/g[i-s]%g[s])*c:0),r)for(;;){if(0==d){for(o=1,s=v[0];s>=10;s/=10,o++);for(s=v[0]+=c,c=1;s>=10;s/=10,c++);o!=c&&(e.e++,v[0]==f&&(v[0]=1));break}if(v[d]+=c,v[d]!=f)break;v[d--]=0,c=1}for(o=v.length;0===v[--o];v.pop());}e.e>L?e.c=e.e=null:e.e<P&&(e.c=[e.e=0])}return e}function H(e){var t,n=e.e;return null===n?e.toString():(t=v(e.c),t=n<=R||n>=A?b(t,n):_(t,n,"0"),e.s<0?"-"+t:t)}return B.clone=e,B.ROUND_UP=0,B.ROUND_DOWN=1,B.ROUND_CEIL=2,B.ROUND_FLOOR=3,B.ROUND_HALF_UP=4,B.ROUND_HALF_DOWN=5,B.ROUND_HALF_EVEN=6,B.ROUND_HALF_CEIL=7,B.ROUND_HALF_FLOOR=8,B.EUCLID=9,B.config=B.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(c+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(m(n=e[t],0,d,t),x=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(m(n=e[t],0,8,t),C=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(m(n[0],-d,0,t),m(n[1],0,d,t),R=n[0],A=n[1]):(m(n,-d,d,t),R=-(A=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)m(n[0],-d,-1,t),m(n[1],1,d,t),P=n[0],L=n[1];else{if(m(n,-d,d,t),!n)throw Error(c+t+" cannot be zero: "+n);P=-(L=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(c+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw j=!n,Error(c+"crypto unavailable");j=n}else j=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(m(n=e[t],0,9,t),M=n),e.hasOwnProperty(t="POW_PRECISION")&&(m(n=e[t],0,d,t),I=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(c+t+" not an object: "+n);D=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(c+t+" invalid: "+n);F=n}}return{DECIMAL_PLACES:x,ROUNDING_MODE:C,EXPONENTIAL_AT:[R,A],RANGE:[P,L],CRYPTO:j,MODULO_MODE:M,POW_PRECISION:I,FORMAT:D,ALPHABET:F}},B.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!B.DEBUG)return!0;var t,n,r=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&i>=-d&&i<=d&&i===a(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break e}if((t=(i+1)%14)<1&&(t+=14),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=f||n!==a(n))break e;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(c+"Invalid BigNumber: "+e)},B.maximum=B.max=function(){return q(arguments,N.lt)},B.minimum=B.min=function(){return q(arguments,N.gt)},B.random=(o=9007199254740992*Math.random()&2097151?function(){return a(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,i,s,l=0,f=[],h=new B(T);if(null==e?e=x:m(e,0,d),i=u(e/14),j)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));l<i;)(s=131072*t[l]+(t[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[l]=n[0],t[l+1]=n[1]):(f.push(s%1e14),l+=2);l=i/2}else{if(!crypto.randomBytes)throw j=!1,Error(c+"crypto unavailable");for(t=crypto.randomBytes(i*=7);l<i;)(s=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(f.push(s%1e14),l+=7);l=i/7}if(!j)for(;l<i;)(s=o())<9e15&&(f[l++]=s%1e14);for(e%=14,(i=f[--l])&&e&&(s=p[14-e],f[l]=a(i/s)*s);0===f[l];f.pop(),l--);if(l<0)f=[r=0];else{for(r=-1;0===f[0];f.splice(0,1),r-=14);for(l=1,s=f[0];s>=10;s/=10,l++);l<14&&(r-=14-l)}return h.e=r,h.c=f,h}),B.sum=function(){for(var e=1,t=arguments,n=new B(t[0]);e<t.length;)n=n.plus(t[e++]);return n},r=function(){function e(e,t,n,r){for(var i,o,s=[0],u=0,a=e.length;u<a;){for(o=s.length;o--;s[o]*=t);for(s[0]+=r.indexOf(e.charAt(u++)),i=0;i<s.length;i++)s[i]>n-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}return function(t,r,i,o,s){var u,a,c,l,f,p,d,h,g=t.indexOf("."),m=x,y=C;for(g>=0&&(l=I,I=0,t=t.replace(".",""),p=(h=new B(r)).pow(t.length-g),I=l,h.c=e(_(v(p.c),p.e,"0"),10,i,"0123456789"),h.e=h.c.length),c=l=(d=e(t,r,i,s?(u=F,"0123456789"):(u="0123456789",F))).length;0==d[--l];d.pop());if(!d[0])return u.charAt(0);if(g<0?--c:(p.c=d,p.e=c,p.s=o,d=(p=n(p,h,m,y,i)).c,f=p.r,c=p.e),g=d[a=c+m+1],l=i/2,f=f||a<0||null!=d[a+1],f=y<4?(null!=g||f)&&(0==y||y==(p.s<0?3:2)):g>l||g==l&&(4==y||f||6==y&&1&d[a-1]||y==(p.s<0?8:7)),a<1||!d[0])t=f?_(u.charAt(1),-m,u.charAt(0)):u.charAt(0);else{if(d.length=a,f)for(--i;++d[--a]>i;)d[a]=0,a||(++c,d=[1].concat(d));for(l=d.length;!d[--l];);for(g=0,t="";g<=l;t+=u.charAt(d[g++]));t=_(t,c,u.charAt(0))}return t}}(),n=function(){function e(e,t,n){var r,i,o,s,u=0,a=e.length,c=t%1e7,l=t/1e7|0;for(e=e.slice();a--;)u=((i=c*(o=e[a]%1e7)+(r=l*o+(s=e[a]/1e7|0)*c)%1e7*1e7+u)/n|0)+(r/1e7|0)+l*s,e[a]=i%n;return u&&(e=[u].concat(e)),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,o,s,u){var c,l,p,d,v,g,m,y,b,_,w,O,k,S,E,N,T,x=r.s==i.s?1:-1,C=r.c,R=i.c;if(!(C&&C[0]&&R&&R[0]))return new B(r.s&&i.s&&(C?!R||C[0]!=R[0]:R)?C&&0==C[0]||!R?0*x:x/0:NaN);for(b=(y=new B(x)).c=[],x=o+(l=r.e-i.e)+1,u||(u=f,l=h(r.e/14)-h(i.e/14),x=x/14|0),p=0;R[p]==(C[p]||0);p++);if(R[p]>(C[p]||0)&&l--,x<0)b.push(1),d=!0;else{for(S=C.length,N=R.length,p=0,x+=2,(v=a(u/(R[0]+1)))>1&&(R=e(R,v,u),C=e(C,v,u),N=R.length,S=C.length),k=N,w=(_=C.slice(0,N)).length;w<N;_[w++]=0);T=R.slice(),T=[0].concat(T),E=R[0],R[1]>=u/2&&E++;do{if(v=0,(c=t(R,_,N,w))<0){if(O=_[0],N!=w&&(O=O*u+(_[1]||0)),(v=a(O/E))>1)for(v>=u&&(v=u-1),m=(g=e(R,v,u)).length,w=_.length;1==t(g,_,m,w);)v--,n(g,N<m?T:R,m,u),m=g.length,c=1;else 0==v&&(c=v=1),m=(g=R.slice()).length;if(m<w&&(g=[0].concat(g)),n(_,g,w,u),w=_.length,-1==c)for(;t(R,_,N,w)<1;)v++,n(_,N<w?T:R,w,u),w=_.length}else 0===c&&(v++,_=[0]);b[p++]=v,_[0]?_[w++]=C[k]||0:(_=[C[k]],w=1)}while((k++<S||null!=_[0])&&x--);d=null!=_[0],b[0]||b.splice(0,1)}if(u==f){for(p=1,x=b[0];x>=10;x/=10,p++);G(y,o+(y.e=p+14*l-1)+1,s,d)}else y.e=l,y.r=+d;return y}}(),w=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,k=/^\.([^.]+)$/,S=/^-?(Infinity|NaN)$/,E=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,n,r){var i,o=n?t:t.replace(E,"");if(S.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(w,(function(e,t,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?e:t})),r&&(i=r,o=o.replace(O,"$1").replace(k,"0.$1")),t!=o))return new B(o,i);if(B.DEBUG)throw Error(c+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},N.absoluteValue=N.abs=function(){var e=new B(this);return e.s<0&&(e.s=1),e},N.comparedTo=function(e,t){return g(this,new B(e,t))},N.decimalPlaces=N.dp=function(e,t){var n,r,i,o=this;if(null!=e)return m(e,0,d),null==t?t=C:m(t,0,8),G(new B(o),e+o.e+1,t);if(!(n=o.c))return null;if(r=14*((i=n.length-1)-h(this.e/14)),i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},N.dividedBy=N.div=function(e,t){return n(this,new B(e,t),x,C)},N.dividedToIntegerBy=N.idiv=function(e,t){return n(this,new B(e,t),0,1)},N.exponentiatedBy=N.pow=function(e,t){var n,r,i,o,s,l,f,p,d=this;if((e=new B(e)).c&&!e.isInteger())throw Error(c+"Exponent not an integer: "+H(e));if(null!=t&&(t=new B(t)),s=e.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!e.c||!e.c[0])return p=new B(Math.pow(+H(d),s?2-y(e):+H(e))),t?p.mod(t):p;if(l=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new B(NaN);(r=!l&&d.isInteger()&&t.isInteger())&&(d=d.mod(t))}else{if(e.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||s&&d.c[1]>=24e7:d.c[0]<8e13||s&&d.c[0]<=9999975e7)))return o=d.s<0&&y(e)?-0:0,d.e>-1&&(o=1/o),new B(l?1/o:o);I&&(o=u(I/14+2))}for(s?(n=new B(.5),l&&(e.s=1),f=y(e)):f=(i=Math.abs(+H(e)))%2,p=new B(T);;){if(f){if(!(p=p.times(d)).c)break;o?p.c.length>o&&(p.c.length=o):r&&(p=p.mod(t))}if(i){if(0===(i=a(i/2)))break;f=i%2}else if(G(e=e.times(n),e.e+1,1),e.e>14)f=y(e);else{if(0===(i=+H(e)))break;f=i%2}d=d.times(d),o?d.c&&d.c.length>o&&(d.c.length=o):r&&(d=d.mod(t))}return r?p:(l&&(p=T.div(p)),t?p.mod(t):o?G(p,I,C,void 0):p)},N.integerValue=function(e){var t=new B(this);return null==e?e=C:m(e,0,8),G(t,t.e+1,e)},N.isEqualTo=N.eq=function(e,t){return 0===g(this,new B(e,t))},N.isFinite=function(){return!!this.c},N.isGreaterThan=N.gt=function(e,t){return g(this,new B(e,t))>0},N.isGreaterThanOrEqualTo=N.gte=function(e,t){return 1===(t=g(this,new B(e,t)))||0===t},N.isInteger=function(){return!!this.c&&h(this.e/14)>this.c.length-2},N.isLessThan=N.lt=function(e,t){return g(this,new B(e,t))<0},N.isLessThanOrEqualTo=N.lte=function(e,t){return-1===(t=g(this,new B(e,t)))||0===t},N.isNaN=function(){return!this.s},N.isNegative=function(){return this.s<0},N.isPositive=function(){return this.s>0},N.isZero=function(){return!!this.c&&0==this.c[0]},N.minus=function(e,t){var n,r,i,o,s=this,u=s.s;if(t=(e=new B(e,t)).s,!u||!t)return new B(NaN);if(u!=t)return e.s=-t,s.plus(e);var a=s.e/14,c=e.e/14,l=s.c,p=e.c;if(!a||!c){if(!l||!p)return l?(e.s=-t,e):new B(p?s:NaN);if(!l[0]||!p[0])return p[0]?(e.s=-t,e):new B(l[0]?s:3==C?-0:0)}if(a=h(a),c=h(c),l=l.slice(),u=a-c){for((o=u<0)?(u=-u,i=l):(c=a,i=p),i.reverse(),t=u;t--;i.push(0));i.reverse()}else for(r=(o=(u=l.length)<(t=p.length))?u:t,u=t=0;t<r;t++)if(l[t]!=p[t]){o=l[t]<p[t];break}if(o&&(i=l,l=p,p=i,e.s=-e.s),(t=(r=p.length)-(n=l.length))>0)for(;t--;l[n++]=0);for(t=f-1;r>u;){if(l[--r]<p[r]){for(n=r;n&&!l[--n];l[n]=t);--l[n],l[r]+=f}l[r]-=p[r]}for(;0==l[0];l.splice(0,1),--c);return l[0]?V(e,l,c):(e.s=3==C?-1:1,e.c=[e.e=0],e)},N.modulo=N.mod=function(e,t){var r,i,o=this;return e=new B(e,t),!o.c||!e.s||e.c&&!e.c[0]?new B(NaN):!e.c||o.c&&!o.c[0]?new B(o):(9==M?(i=e.s,e.s=1,r=n(o,e,0,3),e.s=i,r.s*=i):r=n(o,e,0,M),(e=o.minus(r.times(e))).c[0]||1!=M||(e.s=o.s),e)},N.multipliedBy=N.times=function(e,t){var n,r,i,o,s,u,a,c,l,p,d,v,g,m,y=this,b=y.c,_=(e=new B(e,t)).c;if(!(b&&_&&b[0]&&_[0]))return!y.s||!e.s||b&&!b[0]&&!_||_&&!_[0]&&!b?e.c=e.e=e.s=null:(e.s*=y.s,b&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=h(y.e/14)+h(e.e/14),e.s*=y.s,(a=b.length)<(p=_.length)&&(g=b,b=_,_=g,i=a,a=p,p=i),i=a+p,g=[];i--;g.push(0));for(m=f,1e7,i=p;--i>=0;){for(n=0,d=_[i]%1e7,v=_[i]/1e7|0,o=i+(s=a);o>i;)n=((c=d*(c=b[--s]%1e7)+(u=v*c+(l=b[s]/1e7|0)*d)%1e7*1e7+g[o]+n)/m|0)+(u/1e7|0)+v*l,g[o--]=c%m;g[o]=n}return n?++r:g.splice(0,1),V(e,g,r)},N.negated=function(){var e=new B(this);return e.s=-e.s||null,e},N.plus=function(e,t){var n,r=this,i=r.s;if(t=(e=new B(e,t)).s,!i||!t)return new B(NaN);if(i!=t)return e.s=-t,r.minus(e);var o=r.e/14,s=e.e/14,u=r.c,a=e.c;if(!o||!s){if(!u||!a)return new B(i/0);if(!u[0]||!a[0])return a[0]?e:new B(u[0]?r:0*i)}if(o=h(o),s=h(s),u=u.slice(),i=o-s){for(i>0?(s=o,n=a):(i=-i,n=u),n.reverse();i--;n.push(0));n.reverse()}for((i=u.length)-(t=a.length)<0&&(n=a,a=u,u=n,t=i),i=0;t;)i=(u[--t]=u[t]+a[t]+i)/f|0,u[t]=f===u[t]?0:u[t]%f;return i&&(u=[i].concat(u),++s),V(e,u,s)},N.precision=N.sd=function(e,t){var n,r,i,o=this;if(null!=e&&e!==!!e)return m(e,1,d),null==t?t=C:m(t,0,8),G(new B(o),e,t);if(!(n=o.c))return null;if(r=14*(i=n.length-1)+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&o.e+1>r&&(r=o.e+1),r},N.shiftedBy=function(e){return m(e,-9007199254740991,9007199254740991),this.times("1e"+e)},N.squareRoot=N.sqrt=function(){var e,t,r,i,o,s=this,u=s.c,a=s.s,c=s.e,l=x+4,f=new B("0.5");if(1!==a||!u||!u[0])return new B(!a||a<0&&(!u||u[0])?NaN:u?s:1/0);if(0==(a=Math.sqrt(+H(s)))||a==1/0?(((t=v(u)).length+c)%2==0&&(t+="0"),a=Math.sqrt(+t),c=h((c+1)/2)-(c<0||c%2),r=new B(t=a==1/0?"5e"+c:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new B(a+""),r.c[0])for((a=(c=r.e)+l)<3&&(a=0);;)if(o=r,r=f.times(o.plus(n(s,o,l,1))),v(o.c).slice(0,a)===(t=v(r.c)).slice(0,a)){if(r.e<c&&--a,"9999"!=(t=t.slice(a-3,a+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(G(r,r.e+x+2,1),e=!r.times(r).eq(s));break}if(!i&&(G(o,o.e+x+2,0),o.times(o).eq(s))){r=o;break}l+=4,a+=4,i=1}return G(r,r.e+x+1,C,e)},N.toExponential=function(e,t){return null!=e&&(m(e,0,d),e++),U(this,e,t,1)},N.toFixed=function(e,t){return null!=e&&(m(e,0,d),e=e+this.e+1),U(this,e,t)},N.toFormat=function(e,t,n){var r,i=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=D;else if("object"!=typeof n)throw Error(c+"Argument not an object: "+n);if(r=i.toFixed(e,t),i.c){var o,s=r.split("."),u=+n.groupSize,a=+n.secondaryGroupSize,l=n.groupSeparator||"",f=s[0],p=s[1],d=i.s<0,h=d?f.slice(1):f,v=h.length;if(a&&(o=u,u=a,a=o,v-=o),u>0&&v>0){for(o=v%u||u,f=h.substr(0,o);o<v;o+=u)f+=l+h.substr(o,u);a>0&&(f+=l+h.slice(o)),d&&(f="-"+f)}r=p?f+(n.decimalSeparator||"")+((a=+n.fractionGroupSize)?p.replace(new RegExp("\\d{"+a+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):p):f}return(n.prefix||"")+r+(n.suffix||"")},N.toFraction=function(e){var t,r,i,o,s,u,a,l,f,d,h,g,m=this,y=m.c;if(null!=e&&(!(a=new B(e)).isInteger()&&(a.c||1!==a.s)||a.lt(T)))throw Error(c+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+H(a));if(!y)return new B(m);for(t=new B(T),f=r=new B(T),i=l=new B(T),g=v(y),s=t.e=g.length-m.e-1,t.c[0]=p[(u=s%14)<0?14+u:u],e=!e||a.comparedTo(t)>0?s>0?t:f:a,u=L,L=1/0,a=new B(g),l.c[0]=0;d=n(a,t,0,1),1!=(o=r.plus(d.times(i))).comparedTo(e);)r=i,i=o,f=l.plus(d.times(o=f)),l=o,t=a.minus(d.times(o=t)),a=o;return o=n(e.minus(r),i,0,1),l=l.plus(o.times(f)),r=r.plus(o.times(i)),l.s=f.s=m.s,h=n(f,i,s*=2,C).minus(m).abs().comparedTo(n(l,r,s,C).minus(m).abs())<1?[f,i]:[l,r],L=u,h},N.toNumber=function(){return+H(this)},N.toPrecision=function(e,t){return null!=e&&m(e,1,d),U(this,e,t,2)},N.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=R||o>=A?b(v(n.c),o):_(v(n.c),o,"0"):10===e?t=_(v((n=G(new B(n),x+o+1,C)).c),n.e,"0"):(m(e,2,F.length,"Base"),t=r(_(v(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},N.valueOf=N.toJSON=function(){return H(this)},N._isBigNumber=!0,null!=t&&B.set(t),B}()).default=o.BigNumber=o,void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(126);Object.defineProperty(t,"CONSTANT_ERROR",{enumerable:!0,get:function(){return o(r).default}});var i=n(127);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"CONSTANT_SOCKET",{enumerable:!0,get:function(){return o(i).default}});t.NETCALL_MODE={NETCALL_MODE_AUDIO_VIDEO:0,NETCALL_MODE_ONLY_AUDIO:1,NETCALL_MODE_ONLY_VIDEO:2,NETCALL_MODE_NOAUDIO_NOVIDEO:3},t.KEEP_CALLING_INTERVAL=3e3,t.CALL_TYPE={NETCALL_TYPE_AUDIO:1,NETCALL_TYPE_VIDEO:2},t.CONTROL_TYPE={NETCALL_CONTROL_COMMAND_NOTIFY_AUDIO_ON:1,NETCALL_CONTROL_COMMAND_NOTIFY_AUDIO_OFF:2,NETCALL_CONTROL_COMMAND_NOTIFY_VIDEO_ON:3,NETCALL_CONTROL_COMMAND_NOTIFY_VIDEO_OFF:4,NETCALL_CONTROL_COMMAND_SWITCH_AUDIO_TO_VIDEO:5,NETCALL_CONTROL_COMMAND_SWITCH_AUDIO_TO_VIDEO_AGREE:6,NETCALL_CONTROL_COMMAND_SWITCH_AUDIO_TO_VIDEO_REJECT:7,NETCALL_CONTROL_COMMAND_SWITCH_VIDEO_TO_AUDIO:8,NETCALL_CONTROL_COMMAND_BUSY:9,NETCALL_CONTROL_COMMAND_SELF_CAMERA_INVALID:10,NETCALL_CONTROL_COMMAND_SELF_ON_BACKGROUND:11,NETCALL_CONTROL_COMMAND_START_NOTIFY_RECEIVED:12},t.SESSION_MODE={P2P:0,MEETING:1},t.ROLE_FOR_MEETING={ROLE_HOST:0,ROLE_AUDIENCE:1},t.HANGUP_TYPE={HANGUP_TYPE_NORMAL:0,HANGUP_TYPE_TIMEOUT:-1},t.RECORD_TYPE={RECORD_TYPE_MIX_SINGLE:"0",RECORD_TYPE_ONLY_MIX:"1",RECORD_TYPE_ONLY_SINGLE:"2"},t.RECORD_AUDIO={RECORD_AUDIO_OPEN:1,RECORD_AUDIO_CLOSE:0},t.RECORD_VIDEO={RECORD_VIDEO_OPEN:1,RECORD_VIDEO_CLOSE:0},t.RTMP_RECORD={RTMP_RECORD_OPEN:1,RTMP_RECORD_CLOSE:0},t.LIVE_ENABLE={LIVE_ENABLE_OPEN:1,LIVE_ENABLE_CLOSE:0}},function(e,t,n){var r=n(8),i=n(0).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(3),i=n(75),o=n(37),s=n(35)("IE_PROTO"),u=function(){},a=function(){var e,t=n(29)("iframe"),r=o.length;for(t.style.display="none",n(51).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),a=e.F;r--;)delete a.prototype[o[r]];return a()};e.exports=Object.create||function(e,t){var n;return null!==e?(u.prototype=r(e),n=new u,u.prototype=null,n[s]=e):n=a(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(49),i=n(37);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(36)("keys"),i=n(23);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(2),i=n(0),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(16)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){t.f=n(1)},function(e,t,n){var r=n(0),i=n(2),o=n(16),s=n(38),u=n(7).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:s.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){e.exports=n(100)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(102),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){return function(){var t=e.apply(this,arguments);return new o.default((function(e,n){return function r(i,s){try{var u=t[i](s),a=u.value}catch(e){return void n(e)}if(!u.done)return o.default.resolve(a).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(a)}("next")}))}}},function(e,t,n){"use strict";var r=n(20);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e){e.exports=JSON.parse('{"name":"nertcMini","miniVersion":"4.4.1","description":"nertc mini SDK 网易云信","main":"index.js","directories":{"test":"test"},"scripts":{"clean":"node build/emptyDist.js","build:sdk":"cross-env PLATFORM=all webpack --config webpack.config.js","build:sdk:stats":"webpack --profile --json > dist/webpack-stats.json","build:api":"node build/api","watch:sdk":"npm run build:sdk -- -w","zip:api":"cross-env NODE_ENV=production npm run build:api && node build/api/zip.js","zip:sdk":"cross-env NODE_ENV=production node build/sdk/zip.js","dev":"npm run clean && run-p watch:*","dev:prod":"cross-env NODE_ENV=production npm run dev","pack":"npm run clean && npm run build:sdk && npm run build:api","pack:test":"cross-env NODE_ENV=test npm run pack","pack:prod":"cross-env NODE_ENV=production npm run pack && npm run zip:sdk"},"author":"netease im","license":"ISC","dependencies":{"axios":"^0.18.0","babel-polyfill":"^6.26.0","backo2":"^1.0.2","big-integer":"^1.6.48","bigint-hash":"^0.2.2","bignumber":"^1.1.0","bignumber.js":"^9.0.1","crypto-js":"^4.0.0","deep-access":"^0.1.1","es6-promise":"^4.2.4","eventemitter3":"^2.0.2","gulp":"^3.9.1","gulp-jsdoc3":"^2.0.0","happypack":"^5.0.1","javascript-natural-sort":"^0.7.1","jsdoc":"^3.5.5","json-bigint":"^1.0.0","md5":"^2.2.1","string-replace-loader":"^3.0.1","ws":"^5.1.1","x2js":"^3.2.1","xhr":"^2.4.1"},"devDependencies":{"@types/debug":"^4.1.5","@types/events":"^3.0.0","archiver":"^2.1.1","awaitqueue":"^2.2.3","babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-transform-async-to-generator":"^6.24.1","babel-plugin-transform-es3-member-expression-literals":"^6.22.0","babel-plugin-transform-es3-property-literals":"^6.22.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babel-preset-stage-2":"^6.24.1","bowser":"^2.9.0","cross-env":"^5.1.4","crypto-js":"^4.0.0","debug":"^4.1.1","eslint":"^4.19.1","eslint-config-standard":"^11.0.0","eslint-plugin-import":"^2.11.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.1.0","events":"^3.1.0","fs-extra":"^5.0.0","imports-loader":"^0.8.0","ink-docstrap":"^1.3.2","npm-run-all":"^4.1.2","on-build-webpack":"^0.1.0","pre-build-webpack":"^0.1.0","prettyjson":"^1.1.3","raw-loader":"^0.5.1","sdp-transform":"^2.14.0","supports-color":"^7.1.0","watch-cli":"^0.2.3","webpack":"^4.5.0","webpack-cli":"^3.3.12","webpack-merge":"^4.1.2","wolfy87-eventemitter":"^5.2.4","yaml":"^0.3.0","yargs":"^11.0.0"}}')},function(e,t,n){e.exports=!n(9)&&!n(21)((function(){return 7!=Object.defineProperty(n(29)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var r=n(73)(!0);n(47)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(16),i=n(6),o=n(48),s=n(10),u=n(17),a=n(74),c=n(24),l=n(79),f=n(1)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,h,v,g,m){a(n,t,h);var y,b,_,w=function(e){if(!p&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},O=t+" Iterator",k="values"==v,S=!1,E=e.prototype,N=E[f]||E["@@iterator"]||v&&E[v],T=N||w(v),x=v?k?w("entries"):T:void 0,C="Array"==t&&E.entries||N;if(C&&(_=l(C.call(new e)))!==Object.prototype&&_.next&&(c(_,O,!0),r||"function"==typeof _[f]||s(_,f,d)),k&&N&&"values"!==N.name&&(S=!0,T=function(){return N.call(this)}),r&&!m||!p&&!S&&E[f]||s(E,f,T),u[t]=T,u[O]=d,v)if(y={values:k?T:w("values"),keys:g?T:w("keys"),entries:x},m)for(b in y)b in E||o(E,b,y[b]);else i(i.P+i.F*(p||S),t,y);return y}},function(e,t,n){e.exports=n(10)},function(e,t,n){var r=n(11),i=n(13),o=n(77)(!1),s=n(35)("IE_PROTO");e.exports=function(e,t){var n,u=i(e),a=0,c=[];for(n in u)n!=s&&r(u,n)&&c.push(n);for(;t.length>a;)r(u,n=t[a++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(31),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(0).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(32);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(80);for(var r=n(0),i=n(10),o=n(17),s=n(1)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),a=0;a<u.length;a++){var c=u[a],l=r[c],f=l&&l.prototype;f&&!f[s]&&i(f,s,c),o[c]=o.Array}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(49),i=n(37).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(40),i=n(22),o=n(13),s=n(30),u=n(11),a=n(45),c=Object.getOwnPropertyDescriptor;t.f=n(9)?c:function(e,t){if(e=o(e),t=s(t,!0),a)try{return c(e,t)}catch(e){}if(u(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){var r=n(18),i=n(1)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(3),i=n(20),o=n(1)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[o])?t:i(n)}},function(e,t,n){var r,i,o,s=n(14),u=n(110),a=n(51),c=n(29),l=n(0),f=l.process,p=l.setImmediate,d=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,g=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};p&&d||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){u("function"==typeof e?e:Function(e),t)},r(g),g},d=function(e){delete m[e]},"process"==n(18)(f)?r=function(e){f.nextTick(s(y,e,1))}:v&&v.now?r=function(e){v.now(s(y,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=b,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){a.appendChild(c("script")).onreadystatechange=function(){a.removeChild(this),y.call(e)}}:function(e){setTimeout(s(y,e,1),0)}),e.exports={set:p,clear:d}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(3),i=n(8),o=n(43);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r="https://nrtc.netease.im/demo/getChecksum.action",i={info:{hash:!1,shortHash:!1,miniVersion:"4.4.1"}};console.warn("getChannelInfoUrl: ","https://nrtc.netease.im/nrtc/getChannelInfos.action"),console.warn("checkSumUrl: ",r),i.miniG2={checkSumUrl:r,getChannelInfoUrl:"https://nrtc.netease.im/nrtc/getChannelInfos.action"},e.exports=i},function(e,t,n){var r,i,o,s,u;r=n(141),i=n(65).utf8,o=n(142),s=n(65).bin,(u=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),a=8*e.length,c=1732584193,l=-271733879,f=-1732584194,p=271733878,d=0;d<n.length;d++)n[d]=16711935&(n[d]<<8|n[d]>>>24)|4278255360&(n[d]<<24|n[d]>>>8);n[a>>>5]|=128<<a%32,n[14+(a+64>>>9<<4)]=a;var h=u._ff,v=u._gg,g=u._hh,m=u._ii;for(d=0;d<n.length;d+=16){var y=c,b=l,_=f,w=p;c=h(c,l,f,p,n[d+0],7,-680876936),p=h(p,c,l,f,n[d+1],12,-389564586),f=h(f,p,c,l,n[d+2],17,606105819),l=h(l,f,p,c,n[d+3],22,-1044525330),c=h(c,l,f,p,n[d+4],7,-176418897),p=h(p,c,l,f,n[d+5],12,1200080426),f=h(f,p,c,l,n[d+6],17,-1473231341),l=h(l,f,p,c,n[d+7],22,-45705983),c=h(c,l,f,p,n[d+8],7,1770035416),p=h(p,c,l,f,n[d+9],12,-1958414417),f=h(f,p,c,l,n[d+10],17,-42063),l=h(l,f,p,c,n[d+11],22,-1990404162),c=h(c,l,f,p,n[d+12],7,1804603682),p=h(p,c,l,f,n[d+13],12,-40341101),f=h(f,p,c,l,n[d+14],17,-1502002290),c=v(c,l=h(l,f,p,c,n[d+15],22,1236535329),f,p,n[d+1],5,-165796510),p=v(p,c,l,f,n[d+6],9,-1069501632),f=v(f,p,c,l,n[d+11],14,643717713),l=v(l,f,p,c,n[d+0],20,-373897302),c=v(c,l,f,p,n[d+5],5,-701558691),p=v(p,c,l,f,n[d+10],9,38016083),f=v(f,p,c,l,n[d+15],14,-660478335),l=v(l,f,p,c,n[d+4],20,-405537848),c=v(c,l,f,p,n[d+9],5,568446438),p=v(p,c,l,f,n[d+14],9,-1019803690),f=v(f,p,c,l,n[d+3],14,-187363961),l=v(l,f,p,c,n[d+8],20,1163531501),c=v(c,l,f,p,n[d+13],5,-1444681467),p=v(p,c,l,f,n[d+2],9,-51403784),f=v(f,p,c,l,n[d+7],14,1735328473),c=g(c,l=v(l,f,p,c,n[d+12],20,-1926607734),f,p,n[d+5],4,-378558),p=g(p,c,l,f,n[d+8],11,-2022574463),f=g(f,p,c,l,n[d+11],16,1839030562),l=g(l,f,p,c,n[d+14],23,-35309556),c=g(c,l,f,p,n[d+1],4,-1530992060),p=g(p,c,l,f,n[d+4],11,1272893353),f=g(f,p,c,l,n[d+7],16,-155497632),l=g(l,f,p,c,n[d+10],23,-1094730640),c=g(c,l,f,p,n[d+13],4,681279174),p=g(p,c,l,f,n[d+0],11,-358537222),f=g(f,p,c,l,n[d+3],16,-722521979),l=g(l,f,p,c,n[d+6],23,76029189),c=g(c,l,f,p,n[d+9],4,-640364487),p=g(p,c,l,f,n[d+12],11,-421815835),f=g(f,p,c,l,n[d+15],16,530742520),c=m(c,l=g(l,f,p,c,n[d+2],23,-995338651),f,p,n[d+0],6,-198630844),p=m(p,c,l,f,n[d+7],10,1126891415),f=m(f,p,c,l,n[d+14],15,-1416354905),l=m(l,f,p,c,n[d+5],21,-57434055),c=m(c,l,f,p,n[d+12],6,1700485571),p=m(p,c,l,f,n[d+3],10,-1894986606),f=m(f,p,c,l,n[d+10],15,-1051523),l=m(l,f,p,c,n[d+1],21,-2054922799),c=m(c,l,f,p,n[d+8],6,1873313359),p=m(p,c,l,f,n[d+15],10,-30611744),f=m(f,p,c,l,n[d+6],15,-1560198380),l=m(l,f,p,c,n[d+13],21,1309151649),c=m(c,l,f,p,n[d+4],6,-145523070),p=m(p,c,l,f,n[d+11],10,-1120210379),f=m(f,p,c,l,n[d+2],15,718787259),l=m(l,f,p,c,n[d+9],21,-343485551),c=c+y>>>0,l=l+b>>>0,f=f+_>>>0,p=p+w>>>0}return r.endian([c,l,f,p])})._ff=function(e,t,n,r,i,o,s){var u=e+(t&n|~t&r)+(i>>>0)+s;return(u<<o|u>>>32-o)+t},u._gg=function(e,t,n,r,i,o,s){var u=e+(t&r|n&~r)+(i>>>0)+s;return(u<<o|u>>>32-o)+t},u._hh=function(e,t,n,r,i,o,s){var u=e+(t^n^r)+(i>>>0)+s;return(u<<o|u>>>32-o)+t},u._ii=function(e,t,n,r,i,o,s){var u=e+(n^(t|~r))+(i>>>0)+s;return(u<<o|u>>>32-o)+t},u._blocksize=16,u._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(u(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):r.bytesToHex(n)}},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){"use strict";var r=n(67);e.exports=r.YunXinMiniappSDK},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YunXinMiniappSDK=void 0;var r=l(n(4)),i=l(n(5)),o=l(n(15)),s=l(n(19)),u=l(n(99)),a=l(n(26)),c=l(n(139));function l(e){return e&&e.__esModule?e:{default:e}}t.YunXinMiniappSDK=function(e){function t(e){(0,r.default)(this,t);var n=(0,o.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.default.verifyOptions(e,"appkey"),Object.assign(u.default.prototype,c.default),n._init({appkey:e.appkey,nim:e.nim,logger:n.logger}),n}return(0,s.default)(t,e),(0,i.default)(t,null,[{key:"Client",value:function(e){return t.instance?t.instance:t.instance=new t(e)}},{key:"destroy",value:function(){t.instance=null}}]),t}(u.default)},function(e,t,n){e.exports={default:n(69),__esModule:!0}},function(e,t,n){n(70);var r=n(2).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(6);r(r.S+r.F*!n(9),"Object",{defineProperty:n(7).f})},function(e,t,n){e.exports={default:n(72),__esModule:!0}},function(e,t,n){n(46),n(53),e.exports=n(38).f("iterator")},function(e,t,n){var r=n(31),i=n(32);e.exports=function(e){return function(t,n){var o,s,u=String(i(t)),a=r(n),c=u.length;return a<0||a>=c?e?"":void 0:(o=u.charCodeAt(a))<55296||o>56319||a+1===c||(s=u.charCodeAt(a+1))<56320||s>57343?e?u.charAt(a):o:e?u.slice(a,a+2):s-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(33),i=n(22),o=n(24),s={};n(10)(s,n(1)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(7),i=n(3),o=n(34);e.exports=n(9)?Object.defineProperties:function(e,t){i(e);for(var n,s=o(t),u=s.length,a=0;u>a;)r.f(e,n=s[a++],t[n]);return e}},function(e,t,n){var r=n(18);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(13),i=n(50),o=n(78);e.exports=function(e){return function(t,n,s){var u,a=r(t),c=i(a.length),l=o(s,c);if(e&&n!=n){for(;c>l;)if((u=a[l++])!=u)return!0}else for(;c>l;l++)if((e||l in a)&&a[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(31),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(11),i=n(52),o=n(35)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){"use strict";var r=n(81),i=n(82),o=n(17),s=n(13);e.exports=n(47)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(84),__esModule:!0}},function(e,t,n){n(85),n(57),n(90),n(91),e.exports=n(2).Symbol},function(e,t,n){"use strict";var r=n(0),i=n(11),o=n(9),s=n(6),u=n(48),a=n(86).KEY,c=n(21),l=n(36),f=n(24),p=n(23),d=n(1),h=n(38),v=n(39),g=n(87),m=n(88),y=n(3),b=n(8),_=n(52),w=n(13),O=n(30),k=n(22),S=n(33),E=n(89),N=n(56),T=n(54),x=n(7),C=n(34),R=N.f,A=x.f,P=E.f,L=r.Symbol,j=r.JSON,M=j&&j.stringify,I=d("_hidden"),D=d("toPrimitive"),F={}.propertyIsEnumerable,B=l("symbol-registry"),U=l("symbols"),q=l("op-symbols"),V=Object.prototype,G="function"==typeof L&&!!T.f,H=r.QObject,J=!H||!H.prototype||!H.prototype.findChild,W=o&&c((function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=R(V,t);r&&delete V[t],A(e,t,n),r&&e!==V&&A(V,t,r)}:A,z=function(e){var t=U[e]=S(L.prototype);return t._k=e,t},Y=G&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},$=function(e,t,n){return e===V&&$(q,t,n),y(e),t=O(t,!0),y(n),i(U,t)?(n.enumerable?(i(e,I)&&e[I][t]&&(e[I][t]=!1),n=S(n,{enumerable:k(0,!1)})):(i(e,I)||A(e,I,k(1,{})),e[I][t]=!0),W(e,t,n)):A(e,t,n)},Z=function(e,t){y(e);for(var n,r=g(t=w(t)),i=0,o=r.length;o>i;)$(e,n=r[i++],t[n]);return e},K=function(e){var t=F.call(this,e=O(e,!0));return!(this===V&&i(U,e)&&!i(q,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,I)&&this[I][e])||t)},X=function(e,t){if(e=w(e),t=O(t,!0),e!==V||!i(U,t)||i(q,t)){var n=R(e,t);return!n||!i(U,t)||i(e,I)&&e[I][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=P(w(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==I||t==a||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=P(n?q:w(e)),o=[],s=0;r.length>s;)!i(U,t=r[s++])||n&&!i(V,t)||o.push(U[t]);return o};G||(u((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(q,n),i(this,I)&&i(this[I],e)&&(this[I][e]=!1),W(this,e,k(1,n))};return o&&J&&W(V,e,{configurable:!0,set:t}),z(e)}).prototype,"toString",(function(){return this._k})),N.f=X,x.f=$,n(55).f=E.f=Q,n(40).f=K,T.f=ee,o&&!n(16)&&u(V,"propertyIsEnumerable",K,!0),h.f=function(e){return z(d(e))}),s(s.G+s.W+s.F*!G,{Symbol:L});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)d(te[ne++]);for(var re=C(d.store),ie=0;re.length>ie;)v(re[ie++]);s(s.S+s.F*!G,"Symbol",{for:function(e){return i(B,e+="")?B[e]:B[e]=L(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){J=!0},useSimple:function(){J=!1}}),s(s.S+s.F*!G,"Object",{create:function(e,t){return void 0===t?S(e):Z(S(e),t)},defineProperty:$,defineProperties:Z,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var oe=c((function(){T.f(1)}));s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return T.f(_(e))}}),j&&s(s.S+s.F*(!G||c((function(){var e=L();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!Y(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,M.apply(j,r)}}),L.prototype[D]||n(10)(L.prototype,D,L.prototype.valueOf),f(L,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(23)("meta"),i=n(8),o=n(11),s=n(7).f,u=0,a=Object.isExtensible||function(){return!0},c=!n(21)((function(){return a(Object.preventExtensions({}))})),l=function(e){s(e,r,{value:{i:"O"+ ++u,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!a(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!a(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&f.NEED&&a(e)&&!o(e,r)&&l(e),e}}},function(e,t,n){var r=n(34),i=n(54),o=n(40);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,u=n(e),a=o.f,c=0;u.length>c;)a.call(e,s=u[c++])&&t.push(s);return t}},function(e,t,n){var r=n(18);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(13),i=n(55).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(r(e))}},function(e,t,n){n(39)("asyncIterator")},function(e,t,n){n(39)("observable")},function(e,t,n){e.exports={default:n(93),__esModule:!0}},function(e,t,n){n(94),e.exports=n(2).Object.setPrototypeOf},function(e,t,n){var r=n(6);r(r.S,"Object",{setPrototypeOf:n(95).set})},function(e,t,n){var r=n(8),i=n(3),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(14)(Function.call,n(56).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(97),__esModule:!0}},function(e,t,n){n(98);var r=n(2).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(6);r(r.S,"Object",{create:n(33)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(41)),i=h(n(42)),o=h(n(4)),s=h(n(5)),u=h(n(15)),a=h(n(19)),c=h(n(25)),l=h(n(26)),f=h(n(118)),p=h(n(130)),d=n(28);function h(e){return e&&e.__esModule?e:{default:e}}var v=n(131),g=n(27),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t);var n=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.logger=new v({debug:e.debug,prefix:"mini"}),n._status={appkey:e.appkey||null,startSessionTime:0,endSessionTime:0,lastSessionDuation:0,publishAudio:!1,publishVideo:!1,channelServer:"",statisticsServer:"",role:"broadcaster",runtimeEnvironment:"undefined"==typeof qq?"wechat":"qq"},n._wsController=null,n}return(0,a.default)(t,e),(0,s.default)(t,[{key:"_init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._resetStatus(),Object.assign(this,d.ROLE_FOR_MEETING,d.SESSION_MODE,d.LIVE_ENABLE,d.RECORD_TYPE,d.RECORD_AUDIO,d.RECORD_VIDEO,d.NETCALL_MODE,d.RTMP_RECORD),this._wsController=new f.default(Object.assign(e,{status:this._status})),this._dataReporter=new p.default,this._bindEvent()}},{key:"_resetStatus",value:function(){Object.assign(this._status,{isBigNumberOfLocalUid:!1,joinChannelParam:null,isInTheRoom:!1,createChannelResponse:{},closeEvent:d.CONSTANT_ERROR.closeNormal,rtmpPushAddress:""}),this._status.publishAudio=!1,this._status.publishVideo=!1,this._info={pushUrl:"",userlist:new Map,cid:0,uid:0}}},{key:"_updateStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this._status,e)}},{key:"_bindEvent",value:function(){var e,t=this;this._wsController&&(this._wsController.on("reconnectFailed",(function(e){t.apiEventReport("setDisconnect",{reason:"reconnectFailed"}),t._status.closeEvent=d.CONSTANT_ERROR.reconnectFail,t.destroy()})),this._wsController.on("kicked",(function(e){t.apiEventReport("setDisconnect",{reason:"kicked"}),t._status.closeEvent=d.CONSTANT_ERROR.kicked,t.emit("kicked",e),t.destroy()})),this._wsController.on("roomRefused",(function(e){t._status.closeEvent=d.CONSTANT_ERROR.roomRefused,t.apiEventReport("setDisconnect",{reason:"roomRefused"}),t.emit("kicked",e),t.destroy()})),this._wsController.on("loginFailed",(function(e){e?e.code==d.CONSTANT_ERROR.loginFailed.code?t._status.closeEvent=d.CONSTANT_ERROR.loginFailed:e.code===d.CONSTANT_ERROR.loginFailedEncrypt.code&&(t._status.closeEvent=d.CONSTANT_ERROR.loginFailedEncrypt):t._status.closeEvent=d.CONSTANT_ERROR.loginFailed;var n=t._info.joinChannelParam||t._info.createChannelResponse||{};t.apiEventReport("setLogin",{a_record:!!n.recordAudio,v_record:!!n.recordVideo,record_type:n.recordType?n.recordType+"":"0",host_speaker:!!n.isHostSpeaker,result:e.code,serverIp:n.address||""}),t.destroy()})),this._wsController.on("destroy",(function(){var e=Object.assign({},t._status.closeEvent);t.logger.log("mainController::ws ondestroy: ",e),t._resetStatus(),t.emit("disconnect",e)})),this._wsController.on("error",(function(e){t.apiEventReport("setDisconnect",{reason:"ws error"}),t.emit("error",e)})),this._wsController.on("syncDone",(function(e){t.logger.log("mainController: syncDone 成功:",e);var n="setLogin";t._status.needReconnect&&(n="setRelogin");var r=t._info.joinChannelParam||t._info.createChannelResponse||{};t.apiEventReport(n,{a_record:!!r.recordAudio,v_record:!!r.recordVideo,record_type:r.recordType?r.recordType+"":"0",host_speaker:!!r.isHostSpeaker,result:0,serverIp:r.address||""}),e.userlist.map((function(e){var n=!1;return g.isBigNumber(e.uid)&&(n=!0),n&&g.isBigNumber(t._info.uid)&&e.uid.eq(t._info.uid)||!n&&!g.isBigNumber(t._info.uid)&&e.uid==t._info.uid||e.uid.toString()==t._info.uid.toString()?(t._info.pushUrl&&t._info.pushUrl!==e.url&&(t.logger.log("推流地址发生了变化: ",t._info.pushUrl),t.emit("syncDone",{uid:t._info.uid,url:e.url,isBigNumber:n})),t._info.pushUrl=e.url,void t.logger.log("推流地址: ",t._info.pushUrl)):(t.logger.log("房间里有其他人: ",e.uid),e.subscribed={userSubAudio:!1,audio:!1,slaveAudio:!1,video:!1,screenShare:!1},t._info.userlist.set(e.uid.toString(),e),1==e.role?void t.logger.log(e.uid+" 为观众角色，忽略"):(t.emit("clientJoin",{uid:e.uid,isBigNumber:n}),(e.audio_on||e.video_on||e.screen_on)&&(e.audio_on&&(t.logger.log(e.uid+" 发布了自己的 audio"),t.emit("stream-added",{uid:n?e.uid.toString():e.uid,mediaType:"audio",isBigNumber:n}),t.emit("stream-added",{uid:n?e.uid.toString():e.uid,mediaType:"slaveAudio",isBigNumber:n})),e.video_on&&(t.logger.log(e.uid+" 发布了自己的 video"),t.emit("stream-added",{uid:n?e.uid.toString():e.uid,mediaType:"video",isBigNumber:n})),e.screen_on&&(t.logger.log(e.uid+" 发布了自己的 screenShare"),t.emit("stream-added",{uid:n?e.uid.toString():e.uid,mediaType:"screenShare",isBigNumber:n}))),e))}))})),this._wsController.on("clientLeave",(function(e){t.logger.log("有人离开: ",e.uid);var n=!1;g.isBigNumber(e.uid)&&(n=!0),t.emit("clientLeave",{uid:e.uid,isBigNumber:n}),t._info.userlist.delete(e.uid.toString())})),this._wsController.on("clientMute",(function(e){t.logger.log("mainController: clientMute 有人mute:",e);var n=!1;g.isBigNumber(e.uid)&&(t.logger.log("mainController: clientMute isBigNumber:",n),n=!0),"audio"==e.mediaType?e.mute?n?t.emit("mute-audio",e.uid.toString):t.emit("mute-audio",e.uid):n?t.emit("unmute-audio",e.uid.toString):t.emit("unmute-audio",e.uid):"video"==e.mediaType&&(e.mute?n?t.emit("mute-video",e.uid.toString):t.emit("mute-video",e.uid):n?t.emit("unmute-video",e.uid.toString):t.emit("unmute-video",e.uid))})),this._wsController.on("clientJoin",(function(e){if(e.subscribed={userSubAudio:!1,audio:!1,slaveAudio:!1,video:!1,screenShare:!1},t.logger.log("mainController: clientJoin 有人加入房间:",e),t._info.userlist.set(e.uid.toString(),e),1!=e.role){var n=!1;g.isBigNumber(e.uid)&&(t.logger.log("mainController: clientJoin isBigNumber:",n),n=!0),t.emit("clientJoin",{uid:n?e.uid.toString():e.uid,isBigNumber:n})}else t.logger.log("clientJoin "+e.uid+" 为观众角色，忽略")})),this._wsController.on("clientUpdate",(function(e){t.emit("clientUpdate",e)})),this._wsController.on("liveRoomClose",(function(e){t.emit("liveRoomClose",e)})),this._wsController.on("willreconnect",(function(e){t.apiEventReport("setDisconnect",{reason:"willreconnect"}),t.emit("willreconnect",e)})),this._wsController.on("reconnected",(e=(0,i.default)(r.default.mark((function e(n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setRole(t._status.role),!t._status.publishAudio){e.next=5;break}return t._status.publishAudio=!1,e.next=5,t.publish("audio");case 5:if(!t._status.publishVideo){e.next=9;break}return t._status.publishVideo=!1,e.next=9,t.publish("video");case 9:t.emit("reconnected",n);case 10:case"end":return e.stop()}}),e,t)}))),function(t){return e.apply(this,arguments)})),this._wsController.on("clientPublished",(function(e){var n=!1;if(g.isBigNumber(e.uid)&&(t.logger.log("mainController: clientPublished isBigNumber:",n),n=!0),t.logger.log("clientPublished: ",e),"open"==e.status){if(t.logger.log(e.uid+" 发布了自己的 "+e.mediaType),t.emit("stream-added",{uid:n?e.uid.toString():e.uid,mediaType:e.mediaType,isBigNumber:n}),"audio"==e.mediaType);else if("screenShare"===e.mediaType){var r=t._info.userlist.get(e.uid.toString());r.screen_url=e.url,t._info.userlist.set(e.uid.toString(),r)}}else"close"==e.status&&(t.logger.log(e.uid+" 取消发布了自己的 "+e.mediaType),t.emit("stream-removed",{uid:n?e.uid.toString():e.uid,mediaType:e.mediaType,isBigNumber:n}))})),this._wsController.on("changeRoled",(function(e){var n=!1;if(g.isBigNumber(e.uid)&&(t.logger.log("mainController: changeRoled isBigNumber:",n),n=!0),t.emit("role-Changed",{uid:n?e.uid.toString():e.uid,role:e.role,isBigNumber:n}),t.logger.log(e.uid+" 变更了自己的角色: "+e.role),0==e.role)t.logger.log(e.uid+" 变成了观众通知： "+e.role),t.emit("clientJoin",{uid:n?e.uid.toString():e.uid,isBigNumber:n});else if(1==e.role){t._info.userlist.get(e.uid.toString())?(t.logger.log(e.uid+" 变成了直播通知： "+e.role),t.emit("clientLeave",{uid:n?e.uid.toString():e.uid,isBigNumber:n})):t.logger.log("没有此成员，忽略")}})),this._wsController.on("abilityNotSupport",(function(e){var n=!1;g.isBigNumber(e.uid)&&(t.logger.log("mainController: abilityNotSupport isBigNumber:",n),n=!0),t.emit("ability-not-support",{uid:n?e.uid.toString():e.uid,code:e.code,errMsg:e.errMsg,isBigNumber:n}),t.logger.warn("房间媒体协商出现问题：: "+e.msg)})),this._wsController.on("sendCommandOverTime",(function(e){t.apiEventReport("setDisconnect",{reason:"sendCommandOverTime"}),t.emit("sendCommandOverTime",e)})),this._wsController.on("sessionStart",this.setStartSessionTime.bind(this)),this._wsController.on("sessionEnd",this.setEndSessionTime.bind(this))),this._dataReporter&&this._dataReporter.on("updateStatistics",(function(e){t._dataReporter.updateStatistics(e)}))}},{key:"destroy",value:function(){this._wsController&&this._wsController._destroy()}},{key:"getStatus",value:function(){return l.default.deepClone(this._status)}},{key:"setStartSessionTime",value:function(){this._status.startSessionTime=+Date.now(),this._status.endSessionTime=0,this.emit("sessionStart")}},{key:"setEndSessionTime",value:function(){this._status.startSessionTime?(this._status.endSessionTime=+Date.now(),this._status.lastSessionDuation=this._status.endSessionTime-this._status.startSessionTime):this.logger.log("mainController: setEndSessionTime failed: startSessionTime undefined！")}}]),t}(c.default);t.default=m,e.exports=t.default},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(101),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",a="object"==typeof e,c=t.regeneratorRuntime;if(c)a&&(e.exports=c);else{(c=t.regeneratorRuntime=a?e.exports:{}).wrap=v;var l={},f={};f[o]=function(){return this};var p=Object.getPrototypeOf,d=p&&p(p(N([])));d&&d!==n&&r.call(d,o)&&(f=d);var h=b.prototype=m.prototype=Object.create(f);y.prototype=h.constructor=b,b.constructor=y,b[u]=y.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(h),e},c.awrap=function(e){return{__await:e}},_(w.prototype),w.prototype[s]=function(){return this},c.AsyncIterator=w,c.async=function(e,t,n,r){var i=new w(v(e,t,n,r));return c.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(h),h[u]="Generator",h[o]=function(){return this},h.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=N,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}}}function v(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),s=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var u=O(s,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var a=g(e,t,n);if("normal"===a.type){if(r=n.done?"completed":"suspendedYield",a.arg===l)continue;return{value:a.arg,done:n.done}}"throw"===a.type&&(r="completed",n.method="throw",n.arg=a.arg)}}}(e,n,s),o}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function m(){}function y(){}function b(){}function _(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var t;this._invoke=function(n,i){function o(){return new Promise((function(t,o){!function t(n,i,o,s){var u=g(e[n],e,i);if("throw"!==u.type){var a=u.arg,c=a.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(c).then((function(e){a.value=e,o(a)}),s)}s(u.arg)}(n,i,t,o)}))}return t=t?t.then(o,o):o()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=g(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){e.exports={default:n(103),__esModule:!0}},function(e,t,n){n(57),n(46),n(53),n(104),n(116),n(117),e.exports=n(2).Promise},function(e,t,n){"use strict";var r,i,o,s,u=n(16),a=n(0),c=n(14),l=n(58),f=n(6),p=n(8),d=n(20),h=n(105),v=n(106),g=n(59),m=n(60).set,y=n(111)(),b=n(43),_=n(61),w=n(112),O=n(62),k=a.TypeError,S=a.process,E=S&&S.versions,N=E&&E.v8||"",T=a.Promise,x="process"==l(S),C=function(){},R=i=b.f,A=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n(1)("species")]=function(e){e(C,C)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(C)instanceof t&&0!==N.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),P=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,i=1==e._s,o=0,s=function(t){var n,o,s,u=i?t.ok:t.fail,a=t.resolve,c=t.reject,l=t.domain;try{u?(i||(2==e._h&&I(e),e._h=1),!0===u?n=r:(l&&l.enter(),n=u(r),l&&(l.exit(),s=!0)),n===t.promise?c(k("Promise-chain cycle")):(o=P(n))?o.call(n,a,c):a(n)):c(r)}catch(e){l&&!s&&l.exit(),c(e)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&j(e)}))}},j=function(e){m.call(a,(function(){var t,n,r,i=e._v,o=M(e);if(o&&(t=_((function(){x?S.emit("unhandledRejection",i,e):(n=a.onunhandledrejection)?n({promise:e,reason:i}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=x||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},I=function(e){m.call(a,(function(){var t;x?S.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})}))},D=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=P(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,c(F,r,1),c(D,r,1))}catch(e){D.call(r,e)}})):(n._v=e,n._s=1,L(n,!1))}catch(e){D.call({_w:n,_d:!1},e)}}};A||(T=function(e){h(this,T,"Promise","_h"),d(e),r.call(this);try{e(c(F,this,1),c(D,this,1))}catch(e){D.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(113)(T.prototype,{then:function(e,t){var n=R(g(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=x?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(F,e,1),this.reject=c(D,e,1)},b.f=R=function(e){return e===T||e===s?new o(e):i(e)}),f(f.G+f.W+f.F*!A,{Promise:T}),n(24)(T,"Promise"),n(114)("Promise"),s=n(2).Promise,f(f.S+f.F*!A,"Promise",{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(u||!A),"Promise",{resolve:function(e){return O(u&&this===s?T:this,e)}}),f(f.S+f.F*!(A&&n(115)((function(e){T.all(e).catch(C)}))),"Promise",{all:function(e){var t=this,n=R(t),r=n.resolve,i=n.reject,o=_((function(){var n=[],o=0,s=1;v(e,!1,(function(e){var u=o++,a=!1;n.push(void 0),s++,t.resolve(e).then((function(e){a||(a=!0,n[u]=e,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=R(t),r=n.reject,i=_((function(){v(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(14),i=n(107),o=n(108),s=n(3),u=n(50),a=n(109),c={},l={};(t=e.exports=function(e,t,n,f,p){var d,h,v,g,m=p?function(){return e}:a(e),y=r(n,f,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(d=u(e.length);d>b;b++)if((g=t?y(s(h=e[b])[0],h[1]):y(e[b]))===c||g===l)return g}else for(v=m.call(e);!(h=v.next()).done;)if((g=i(v,y,h.value,t))===c||g===l)return g}).BREAK=c,t.RETURN=l},function(e,t,n){var r=n(3);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(17),i=n(1)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(58),i=n(1)("iterator"),o=n(17);e.exports=n(2).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(0),i=n(60).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,u=r.Promise,a="process"==n(18)(s);e.exports=function(){var e,t,n,c=function(){var r,i;for(a&&(r=s.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(a)n=function(){s.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(u&&u.resolve){var l=u.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,p=document.createTextNode("");new o(c).observe(p,{characterData:!0}),n=function(){p.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(0).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(10);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(7),s=n(9),u=n(1)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];s&&t&&!t[u]&&o.f(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(1)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(6),i=n(2),o=n(0),s=n(59),u=n(62);r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(6),i=n(43),o=n(61);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(41)),i=d(n(42)),o=d(n(4)),s=d(n(5)),u=d(n(15)),a=d(n(19)),c=d(n(119)),l=d(n(25)),f=n(129),p=n(28);function d(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,t);var n=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._init(e),n._websocket=null,n}var n,l,d,h,v,g,m;return(0,a.default)(t,e),(0,s.default)(t,[{key:"_init",value:function(e){var t=e.status,n=e.logger,r=void 0===n?f.pureLogger:n;this._mainStatus=t,this.logger=r,this._initStatus()}},{key:"_initStatus",value:function(){var e=this;this._status||(this._status={}),Object.keys(this._status).forEach((function(t){delete e._status[t]})),Object.assign(this._status,{needReconnect:!1,reconnectTimer:null,currentOptions:null,reconnectCount:0,reconnectMaxNum:8,destroy:!1})}},{key:"_destroy",value:function(){return this._resetReconnectStatus(!0),this.stopSignal()}},{key:"_resetReconnectStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];clearTimeout(this._status.reconnectTimer),Object.assign(this._status,{needReconnect:!1,reconnectCount:0,reconnectTimer:null,destroy:e})}},{key:"_resetWhenClose",value:function(){this._resetReconnectStatus(),this._unbindEvent(),this._websocket=null,this._initStatus()}},{key:"_bindEvent",value:function(){var e=this;this._websocket?(this._websocket.on("open",this._onOpen.bind(this)),this._websocket.on("error",this._onError.bind(this)),this._websocket.on("close",this._onClose.bind(this)),this._websocket.on("hangup",this._onHangup.bind(this)),this._websocket.on("syncDone",this._onSyncDone.bind(this)),this._websocket.on("clientLeave",this._onClientLeave.bind(this)),this._websocket.on("clientJoin",this._onClientJoin.bind(this)),this._websocket.on("clientUpdate",this._onClientUpdate.bind(this)),this._websocket.on("clientMute",this._onClientMute.bind(this)),this._websocket.on("liveRoomClose",this._onLiveRoomClose.bind(this)),this._websocket.on("kicked",this._onKicked.bind(this)),this._websocket.on("roomRefused",this._onRoomRefused.bind(this)),this._websocket.on("clientPublished",this._onClientPublished.bind(this)),this._websocket.on("changeRoled",this._onChangeRoled.bind(this)),this._websocket.on("abilityNotSupport",this._onAbilityNotSupport.bind(this)),this._websocket.on("sendCommandOverTime",this._onSendCommandOverTime.bind(this)),this._websocket.on("heartbeatOverTime",(function(t){e.logger.log("WSController::heartbeatOverTime",t),e.stopSignal()}))):this.logger.warn("WSController::_bindEvent: _websocket为空！")}},{key:"_unbindEvent",value:function(){this._websocket&&(this._websocket.off("open"),this._websocket.off("error"),this._websocket.off("close"),this._websocket.off("hangup"),this._websocket.off("syncDone"),this._websocket.off("clientLeave"),this._websocket.off("clientJoin"),this._websocket.off("clientUpdate"),this._websocket.off("clientMute"),this._websocket.off("liveRoomClose"),this._websocket.off("kicked"),this._websocket.off("roomRefused"),this._websocket.off("clientPublished"),this._websocket.off("changeRoled"),this._websocket.off("abilityNotSupport"),this._websocket.off("sendCommandOverTime"),this._websocket.off("heartbeatOverTime"))}},{key:"_onOpen",value:function(e){}},{key:"_onError",value:function(e){this.logger.error("wsController::onerror: ",e),e&&e.code&&"登录失败"==e.desc?(this._resetReconnectStatus(),this.emit("loginFailed",e)):this._status.reconnectTimer||(this.logger.log("wsController 没有重连计时器，调用stopSignal"),this.stopSignal()),this._status.needReconnect||(e.connectCount=this._status.reconnectCount,this.logger.log("反馈error事件"),this.emit("error",e))}},{key:"_onClose",value:function(){var e=this;if(this.logger.log("主动 _onClose"),this._status.needReconnect)this._unbindEvent(),this._websocket=null,this.logger.log("wsController::onclose: 重连 try reconnect No. "+this._status.reconnectCount,(new Date).toString()),this.emit("willreconnect",{count:this._status.reconnectCount}),clearTimeout(this._status.reconnectTimer),this._status.reconnectTimer=setTimeout((function(){e._status.reconnectTimer=null,e.logger.log("重连： startSignal"),e.startSignal().then((function(t){e.logger.log("重连成功"),e.emit("reconnected")})).catch((function(t){e.logger.warn("重连失败: ",t),"login timeout"==t&&e._onClose()}))}),5e3);else{this.logger.log("主动触发的destroy");var t=this._status.destroy;this._resetWhenClose(),t?this.emit("destroy"):(this.emit("close"),this.logger.log("wsController::onclose: close need not reconnect"))}}},{key:"_onHangup",value:function(){return this.setEndSessionTime(),this._resetReconnectStatus(!0),this.stopSignal()}},{key:"_onSyncDone",value:function(e){e.connectCount=this._status.reconnectCount,this._status.reconnectCount=0,this.emit("syncDone",e)}},{key:"_onClientLeave",value:function(e){if(this._mainStatus.sessionMode===p.SESSION_MODE.P2P)return this.emit("_invokeHangup",{channelId:e.cid,timetag:+new Date,account:e.accid}),void this.logger.log("wsController::onClientLeave: _invokeHangup");var t=Object.assign({},e);this.emit("clientLeave",t)}},{key:"_onClientJoin",value:function(e){var t=Object.assign({},e);this.emit("clientJoin",t)}},{key:"_onClientUpdate",value:function(e){var t=Object.assign({},e.body);this.emit("clientUpdate",t)}},{key:"_onClientMute",value:function(e){Object.assign({},e);this.emit("clientMute",e)}},{key:"_onLiveRoomClose",value:function(e){this.emit("liveRoomClose",e)}},{key:"_onKicked",value:function(e){this.emit("kicked",e)}},{key:"_onRoomRefused",value:function(e){this.emit("roomRefused",e)}},{key:"_onSendCommandOverTime",value:function(){this.emit("sendCommandOverTime")}},{key:"_onClientPublished",value:function(e){var t=Object.assign({},e.body);this.emit("clientPublished",t)}},{key:"_onChangeRoled",value:function(e){var t=Object.assign({},e.body);this.emit("changeRoled",t)}},{key:"_onAbilityNotSupport",value:function(e){var t=Object.assign({},e.body);this.emit("abilityNotSupport",t)}},{key:"joinChannel",value:function(e){return this.setStartSessionTime(),e.logger=this.logger,e.mainStatus=this._mainStatus,this._status.currentOptions=e,this.startSignal(e)}},{key:"leaveChannel",value:function(){return this.logger.log("主动离开房间"),this.setEndSessionTime(),this._resetReconnectStatus(!0),this.stopSignal()}},{key:"startSignal",value:function(e){if(e||(e=this._status.currentOptions),this.logger.log("reconnect count <= reconnectMaxNum ? "+this._status.reconnectCount+","+this._status.reconnectMaxNum),!(this._status.reconnectCount<=this._status.reconnectMaxNum)){this._resetReconnectStatus(!0),this.logger.warn("wsController: maxceed reconnect times ...");var t={message:"number of connections exceeded"};return this.emit("reconnectFailed",t),Promise.reject(t)}if(!this._websocket)return this._status.needReconnect=!0,this._status.reconnectCount++,this._websocket=new c.default(e),this._bindEvent(),this.logger.log("开始连接小程序服务器"),this._websocket.login();this.logger.log("已经有websocket了"),this.logger.log("wsController: already in session ...");return Promise.reject({message:"already in session"})}},{key:"stopSignal",value:function(){return this._websocket?(this.logger.log("wsController::stopSignal: start..."),this._websocket.logout()):(this._onClose(),Promise.resolve())}},{key:"publish",value:(m=(0,i.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._websocket.publish(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"unpublish",value:(g=(0,i.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._websocket.unpublish(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"subscribe",value:(v=(0,i.default)(r.default.mark((function e(t,n,i){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("slaveAudio"!==n){e.next=2;break}return e.abrupt("return",this._websocket.setDualAudio(t,i));case 2:return e.abrupt("return",this._websocket.subscribe(t,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return v.apply(this,arguments)})},{key:"unsubscribe",value:(h=(0,i.default)(r.default.mark((function e(t,n,i){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("slaveAudio"!==n){e.next=2;break}return e.abrupt("return",this._websocket.setDualAudio(t,i));case 2:return e.abrupt("return",this._websocket.unsubscribe(t,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return h.apply(this,arguments)})},{key:"mute",value:(d=(0,i.default)(r.default.mark((function e(t,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._websocket.mute(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"unmute",value:(l=(0,i.default)(r.default.mark((function e(t,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._websocket.unmute(t,n));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"changeRole",value:(n=(0,i.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._websocket.changeRole(t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"switchMode",value:function(e){return this._websocket.updatePushMode(e)}},{key:"setStartSessionTime",value:function(){this.emit("sessionStart")}},{key:"setEndSessionTime",value:function(){this.emit("sessionEnd")}}]),t}(l.default);t.default=h,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(4)),i=h(n(5)),o=h(n(15)),s=h(n(19)),u=h(n(25)),a=h(n(26)),c=n(120),l=n(121),f=n(122),p=n(28),d=n(128);function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,t);var n=(0,o.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._reset(),n.$options=e,n._mainStatus=e.mainStatus,n.logger=e.logger,n._resetStatus(),Object.keys(n._status).forEach((function(t){var r=e[t];null!=r&&(n._status[t]=r)})),n._status.edgeAddr=e.edgeAddr||"59.111.239.249:31101",n}return(0,s.default)(t,e),(0,i.default)(t,[{key:"_resetStatus",value:function(){if(this._status&&(clearInterval(this._status.heartbeatTimer),clearTimeout(this._status.heartbeatOverTimer),this._status.sendCommandTimerMap&&0!==Object.keys(this._status.sendCommandTimerMap).length))for(var e in this._status.sendCommandTimerMap)clearTimeout(this._status.sendCommandTimerMap[e]);this._status={dualAudio:0,uid:"",cid:"",accid:"",token:"",address:[],webrtc:1,mode:0,scene:1,usertype:3,liveEnable:0,rtmpRecord:0,rtmpUrl:"",splitMode:"",recordAudio:0,recordVideo:0,recordType:0,isHostSpeaker:0,role:0,seq:1,cmdTasksMap:{},heartbeatTimer:null,heartbeatOverTimer:null,sendCommandTimerMap:{},layout:"",socketStatus:"CLOSED",checkP2PUserTimer:null,edgeAddr:""},this._resolve=null,this._reject=null,this._loginTimer&&clearTimeout(this._loginTimer),this._loginTimer=null}},{key:"_reset",value:function(){this.$options={},this._resetStatus(),this._wsLink=null}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){if(e.logger.log("建立长链接, url: ",e._status.address),e._reject=n,"qq"==e._mainStatus.runtimeEnvironment)e._wsLink=qq.connectSocket({url:e._status.address,fail:function(t){e.logger.error("ws connect 动作执行失败： ",p.CONSTANT_ERROR.connectSocketFail.desc),e._status.socketStatus="CLOSED",n(p.CONSTANT_ERROR.connectSocketFail)},success:function(n){e._status.socketStatus="OPENING",e._resolve=t},complete:function(e){}});else{if("wechat"!==e._mainStatus.runtimeEnvironment)throw Error("WS 不支持的平台");e._wsLink=wx.connectSocket({url:e._status.address,fail:function(t){e.logger.error("ws connect 动作执行失败： ",p.CONSTANT_ERROR.connectSocketFail.desc),e._status.socketStatus="CLOSED",n(p.CONSTANT_ERROR.connectSocketFail)},success:function(n){e._status.socketStatus="OPENING",e._resolve=t},complete:function(e){}})}e._bindWXSocketEvent(),e._loginTimer=setTimeout((function(){e._reject&&(e.closeSocket(),e._reject("login timeout"))}),6e5)}))}},{key:"logout",value:function(){var e=this,t={uid:this._status.uid,cid:this._status.cid,statistic:{},seq:this._status.seq++};return this.logger.log("ws::logout: ws status "+this._status.socketStatus),Promise.resolve().then((function(){return"LOGIN"===e._status.socketStatus?e.sendCmd("logout",t).then((function(t){return t&&e.logger.log("ws::logout:",t.code),Promise.resolve(t)})):Promise.resolve()})).then((function(){if(!e._wsLink)return e.emit("close"),Promise.resolve();switch(clearInterval(e._status.heartbeatTimer),e._status.socketStatus){case"OPENING":case"OPEN":case"LOGIN":case"CLOSING":return e.closeSocket();case"CLOSED":return e.emit("close"),Promise.resolve()}}))}},{key:"closeSocket",value:function(){var e=this;return new Promise((function(t,n){e.logger.log("ws::close WebSocket starting..."),clearInterval(e._status.heartbeatTimer),clearTimeout(e._status.heartbeatOverTimer),e._wsLink.onOpen=null,e._wsLink.onOpen=null,e._wsLink.onOpen=null,e._wsLink.onMessage=null,e._wsLink.close({code:1e3,reason:"ws::user force close websocket",success:function(t){e._status.socketStatus="CLOSING",e.logger.log("ws::close WebSocket force closed success")},fail:function(t){e._status.socketStatus="CLOSING",e.logger.log("ws::close WebSocket force closed fail")},complete:function(){e.emit("close"),t()}})}))}},{key:"publish",value:function(e){var t=this;return new Promise((function(n,r){t.sendCmd("publish",{mediaType:e,uid:t._status.uid,cid:t._status.cid,status:"open"}).then((function(e){200===e.code?n():r(e)}))}))}},{key:"unpublish",value:function(e){var t=this;return new Promise((function(n,r){t.sendCmd("unpublish",{mediaType:e,uid:t._status.uid,cid:t._status.cid,status:"close"}).then((function(e){200===e.code?n():r(e)}))}))}},{key:"subscribe",value:function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd("subscribe",{mediaType:t,uid:n._status.uid,srcUid:e,cid:n._status.cid,sub:!0}).then((function(e){n.logger.log("订阅返回结果：",JSON.stringify(e,null," ")),200===e.code?r():i(e)}))}))}},{key:"unsubscribe",value:function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd("unsubscribe",{mediaType:t,uid:n._status.uid,srcUid:e,cid:n._status.cid,sub:!1}).then((function(e){200===e.code?r():i(e)}))}))}},{key:"setDualAudio",value:function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd("dualAudio",{uid:n._status.uid,srcUid:e,cid:n._status.cid,dualAudio:t}).then((function(e){n.logger.log("dualAudio返回结果：",JSON.stringify(e,null," ")),200===e.code?r():i(e)}))}))}},{key:"mute",value:function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd("mute",{uid:e||n._status.uid,mediaType:t,cid:n._status.cid,mute:!0}).then((function(e){200===e.code?r():i(e)}))}))}},{key:"unmute",value:function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd("unmute",{uid:e||n._status.uid,mediaType:t,cid:n._status.cid,mute:!1}).then((function(e){200===e.code?r():i(e)}))}))}},{key:"changeRole",value:function(e){var t=this;return new Promise((function(n,r){t.sendCmd("changeRole",{uid:t._status.uid,cid:t._status.cid,role:e}).then((function(e){200===e.code?n():r(e)}))}))}},{key:"updatePushMode",value:function(e){var t=this;return this._status.mode=e,new Promise((function(e,n){t.sendCmd("updatePushMode",t._status).then((function(t){200===t.code?e():n(t)}))}))}},{key:"startHeartbeat",value:function(){var e=this;this._status.heartbeatTimer=setInterval((function(){if(!e._status.heartbeatOverTimer){var t=Date.now();e._status.heartbeatOverTimer=setTimeout((function(){e.logger.log("ws::heartbeating: overtime:",(new Date).toString()),e.emit("heartbeatOverTime",{lastTime:t})}),d.Config.heartbeatOverTime)}return e.sendCmd("heartbeat",e._status)}),d.Config.heartbeatInterval)}},{key:"getUploadUserList",value:function(){var e=this;return new Promise((function(t,n){e.sendCmd("getUploadUserList",e._status).then((function(e){200===e.code?t(e):n(e)}))}))}},{key:"_judgeRoleAndSave",value:function(e){var t=this,n=a.default.deepClone(e);return"audience"===this._mainStatus.role&&n.userlist.map((function(e){e.uid===t._status.uid&&(t._mainStatus.rtmpPushAddress=e.url,e.url=null)})),n}},{key:"_bindWXSocketEvent",value:function(){var e=this;this._wsLink.onOpen((function(t){e._status.socketStatus="OPEN",e._status.newprotocol=2,e.emit("open",p.CONSTANT_SOCKET.connectSocketSuccess),e.logger.log("开始登录小程序网关: ",e._status),e.sendCmd("login",e._status).then((function(t){e.logger.log("ws::onlogin"),e._status.socketStatus="LOGIN",e.startHeartbeat(),e.emit("syncDone",t),e._resolve&&(e._resolve(),e._loginTimer&&clearTimeout(e._loginTimer),e._loginTimer=null)})).catch((function(t){e.emit("error",{code:t.code,desc:"登录失败"})}))})),this._wsLink.onError((function(t){e.logger.log("ws::onerror ",t),e.emit("error",t)})),this._wsLink.onClose((function(t){e._status.socketStatus="CLOSED",e.logger.log("ws::onclose ",t),e.emit("close",t),e._reset()})),this._wsLink.onMessage((function(t){var n=t.data;if("onHeartbeat"!==(n=(0,f.parsePacket)(n)).cmd&&e.logger.log("ws::onmessage",n),n.seq){var r=e._status.cmdTasksMap[n.seq];r&&(delete e._status.cmdTasksMap[n.seq],200===n.body.code?r.resolve(n.body):r.reject(n.body))}e[n.cmd]&&e[n.cmd](n),0!==Object.keys(e._status.sendCommandTimerMap).length&&(clearTimeout(e._status.sendCommandTimerMap[n.seq]),delete e._status.sendCommandTimerMap[n.seq])}))}},{key:"sendCmd",value:function(e,t){var n=this;if("heartbeat"===e){var r=(0,f.genPacket)(e,t,this._status.seq++,this._status.isHostSpeaker,this._mainStatus.isBigNumberOfLocalUid);return this._wsLink.send({data:r}),Promise.resolve()}var i=setTimeout((function(){n.logger.log("oops! ws::sendCmd timmout: ",e),n.emit("sendCommandOverTime",{cmd:e})}),d.Config.sendCommandOverTime);return this._status.sendCommandTimerMap[this._status.seq]=i,new Promise((function(r,i){"logout"===e&&setTimeout((function(){r()}),300),n._status.cmdTasksMap[n._status.seq]={resolve:r,reject:i};var o=(0,f.genPacket)(e,t,n._status.seq++);n.logger.log("小程序ws::sendCmd ",o);try{n._wsLink.send({data:o})}catch(e){n.logger.error("小程序ws::信令发送失败")}}))}}]),t}(u.default);(0,c.apiMixin)(v),(0,l.messageMixin)(v),t.default=v,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiMixin=function(e){e.prototype}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messageMixin=function(e){var t=e.prototype;t.onClientLeave=function(e){this.emit("clientLeave",e.body)},t.onClientJoin=function(e){this.emit("clientJoin",e.body)},t.onClientMute=function(e){this.emit("clientMute",e.body)},t.onClientUpdate=function(e){this.emit("clientUpdate",e)},t.onUpdatePushMode=function(e){this.emit("updatePushMode",e)},t.onLiveRoomClose=function(e){this.emit("liveRoomClose",e)},t.onKicked=function(e){this.emit("kicked",e)},t.onRoomRefused=function(e){this.emit("roomRefused",e)},t.clientPublished=function(e){this.emit("clientPublished",e)},t.changeRoled=function(e){this.emit("changeRoled",e)},t.abilityNotSupport=function(e){this.emit("abilityNotSupport",e)},t.onHeartbeat=function(e){clearTimeout(this._status.heartbeatOverTimer),this._status.heartbeatOverTimer=null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genPacket=function(e,t,n){var o=i[e];if(o){var s={cmd:o.cmd,body:{},seq:n},u=Object.assign({},s),a=o.body;return a.forEach((function(e){(t[e.key]||0===t[e.key])&&(u.body[e.key]=t[e.key])})),r.stringify(u)}},t.parsePacket=function(e){var t=r.parse(e);return t.cmd=o[t.cmd].cmd,t};var r=n(123);var i={login:{cmd:0,body:[{key:"accid",type:"String"},{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"accid",type:"Number"},{key:"token",type:"String"},{key:"mode",type:"Number"},{key:"scene",type:"Number"},{key:"usertype",type:"Number"},{key:"liveEnable",type:"Number"},{key:"webrtc",type:"Number"},{key:"recordAudio",type:"Number"},{key:"recordVideo",type:"Number"},{key:"rtmpRecord",type:"Number"},{key:"rtmpUrl",type:"String"},{key:"splitMode",type:"Number"},{key:"layout",type:"Boolean"},{key:"recordType",type:"String"},{key:"role",type:"Number"},{key:"isHostSpeaker",type:"Number"},{key:"edgeAddr",type:"String"},{key:"newprotocol",type:"Number"},{key:"dualAudio",type:"Number"}]},heartbeat:{cmd:2,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"statistic",type:"Object"}]},logout:{cmd:4,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"statistic",type:"Object"}]},publish:{cmd:10,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"mediaType",type:"String"},{key:"status",type:"String"}]},unpublish:{cmd:10,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"mediaType",type:"String"},{key:"status",type:"String"}]},subscribe:{cmd:16,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"srcUid",type:"String"},{key:"mediaType",type:"String"},{key:"sub",type:"Boolean"}]},unsubscribe:{cmd:16,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"srcUid",type:"String"},{key:"mediaType",type:"String"},{key:"sub",type:"Boolean"}]},dualAudio:{cmd:17,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"srcUid",type:"String"},{key:"dualAudio",type:"Number"}]},mute:{cmd:11,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"mediaType",type:"String"},{key:"mute",type:"Boolean"}]},unmute:{cmd:11,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"mediaType",type:"String"},{key:"mute",type:"Boolean"}]},changeRole:{cmd:12,body:[{key:"uid",type:"Number"},{key:"cid",type:"String"},{key:"role",type:"Number"}]},getUploadUserList:{cmd:5,body:[{key:"uid",type:"Number"},{key:"cid",type:"Number"}]},updatePushMode:{cmd:7,body:[{key:"uid",type:"Number"},{key:"cid",type:"Number"},{key:"mode",type:"Number"}]}},o={1:{cmd:"onLogin",body:[{key:"code"},{key:"errmsg"},{key:"userlist"}]},3:{cmd:"onHeartbeat",body:[{key:"code"},{key:"errmsg"},{key:"userlist"}]},6:{cmd:"onUploadUserList",body:[{key:"code"},{key:"errmsg"},{key:"userlist"}]},8:{cmd:"onUpdatePushMode",body:[{key:"code"},{key:"errmsg"}]},9:{cmd:"onLogout",body:[{key:"code"}]},14:{cmd:"onPublishOrUnpublish",body:[{key:"code"},{key:"errmsg"},{key:"cid"},{key:"uid"}]},15:{cmd:"onClientMute",body:[{key:"mediaType"},{key:"mute"},{key:"cid"},{key:"uid"}]},20:{cmd:"onClientJoin",body:[{key:"uid"},{key:"accid"},{key:"cid"},{key:"url"},{key:"screenUrl"},{key:"mode"},{key:"role"}]},21:{cmd:"onClientLeave",body:[{key:"uid"},{key:"accid"},{key:"cid"}]},22:{cmd:"onClientUpdate",body:[{key:"uid"},{key:"accid"},{key:"cid"},{key:"mode"}]},23:{cmd:"onLiveRoomClose",body:[{key:"cid"},{key:"reason"}]},24:{cmd:"onKicked",body:[{key:"cid"},{key:"reason"}]},25:{cmd:"onRoomRefused",body:[{key:"cid"},{key:"reason"}]},26:{cmd:"clientPublished",body:[{key:"uid"},{key:"accid"},{key:"cid"},{key:"mediaType"},{key:"status"}]},27:{cmd:"changeRoled",body:[{key:"uid"},{key:"accid"},{key:"cid"},{key:"role"}]},28:{cmd:"abilityNotSupport",body:[{key:"uid"},{key:"accid"},{key:"cid"},{key:"code"},{key:"msg"}]}}},function(e,t,n){var r=n(124).stringify,i=n(125);e.exports=function(e){return{parse:i(e),stringify:r}},e.exports.parse=i(),e.exports.stringify=r},function(e,t,n){var r=n(27),i=e.exports;!function(){"use strict";var e,t,n,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function u(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,(function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}"function"!=typeof i.stringify&&(i.stringify=function(i,o,s){var a;if(e="",t="","number"==typeof s)for(a=0;a<s;a+=1)t+=" ";else"string"==typeof s&&(t=s);if(n=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw new Error("JSON.stringify");return function i(o,s){var a,c,l,f,p,d=e,h=s[o],v=null!=h&&(h instanceof r||r.isBigNumber(h));switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(o)),"function"==typeof n&&(h=n.call(s,o,h)),typeof h){case"string":return v?h:u(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":case"bigint":return String(h);case"object":if(!h)return"null";if(e+=t,p=[],"[object Array]"===Object.prototype.toString.apply(h)){for(f=h.length,a=0;a<f;a+=1)p[a]=i(a,h)||"null";return l=0===p.length?"[]":e?"[\n"+e+p.join(",\n"+e)+"\n"+d+"]":"["+p.join(",")+"]",e=d,l}if(n&&"object"==typeof n)for(f=n.length,a=0;a<f;a+=1)"string"==typeof n[a]&&(l=i(c=n[a],h))&&p.push(u(c)+(e?": ":":")+l);else Object.keys(h).forEach((function(t){var n=i(t,h);n&&p.push(u(t)+(e?": ":":")+n)}));return l=0===p.length?"{}":e?"{\n"+e+p.join(",\n"+e)+"\n"+d+"}":"{"+p.join(",")+"}",e=d,l}}("",{"":i})})}()},function(e,t,n){var r=null;const i=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,o=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;e.exports=function(e){"use strict";var t={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=e){if(!0===e.strict&&(t.strict=!0),!0===e.storeAsString&&(t.storeAsString=!0),t.alwaysParseAsBig=!0===e.alwaysParseAsBig&&e.alwaysParseAsBig,t.useNativeBigInt=!0===e.useNativeBigInt&&e.useNativeBigInt,void 0!==e.constructorAction){if("error"!==e.constructorAction&&"ignore"!==e.constructorAction&&"preserve"!==e.constructorAction)throw new Error('Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed '+e.constructorAction);t.constructorAction=e.constructorAction}if(void 0!==e.protoAction){if("error"!==e.protoAction&&"ignore"!==e.protoAction&&"preserve"!==e.protoAction)throw new Error('Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed '+e.protoAction);t.protoAction=e.protoAction}}var s,u,a,c,l={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},f=function(e){throw{name:"SyntaxError",message:e,at:s,text:a}},p=function(e){return e&&e!==u&&f("Expected '"+e+"' instead of '"+u+"'"),u=a.charAt(s),s+=1,u},d=function(){var e,i="";for("-"===u&&(i="-",p("-"));u>="0"&&u<="9";)i+=u,p();if("."===u)for(i+=".";p()&&u>="0"&&u<="9";)i+=u;if("e"===u||"E"===u)for(i+=u,p(),"-"!==u&&"+"!==u||(i+=u,p());u>="0"&&u<="9";)i+=u,p();if(e=+i,isFinite(e))return null==r&&(r=n(27)),i.length>15?t.storeAsString?i:t.useNativeBigInt?BigInt(i):new r(i):t.alwaysParseAsBig?t.useNativeBigInt?BigInt(e):new r(e):e;f("Bad number")},h=function(){var e,t,n,r="";if('"'===u)for(var i=s;p();){if('"'===u)return s-1>i&&(r+=a.substring(i,s-1)),p(),r;if("\\"===u){if(s-1>i&&(r+=a.substring(i,s-1)),p(),"u"===u){for(n=0,t=0;t<4&&(e=parseInt(p(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof l[u])break;r+=l[u]}i=s}}f("Bad string")},v=function(){for(;u&&u<=" ";)p()};return c=function(){switch(v(),u){case"{":return function(){var e,n=Object.create(null);if("{"===u){if(p("{"),v(),"}"===u)return p("}"),n;for(;u;){if(e=h(),v(),p(":"),!0===t.strict&&Object.hasOwnProperty.call(n,e)&&f('Duplicate key "'+e+'"'),!0===i.test(e)?"error"===t.protoAction?f("Object contains forbidden prototype property"):"ignore"===t.protoAction?c():n[e]=c():!0===o.test(e)?"error"===t.constructorAction?f("Object contains forbidden constructor property"):"ignore"===t.constructorAction?c():n[e]=c():n[e]=c(),v(),"}"===u)return p("}"),n;p(","),v()}}f("Bad object")}();case"[":return function(){var e=[];if("["===u){if(p("["),v(),"]"===u)return p("]"),e;for(;u;){if(e.push(c()),v(),"]"===u)return p("]"),e;p(","),v()}}f("Bad array")}();case'"':return h();case"-":return d();default:return u>="0"&&u<="9"?d():function(){switch(u){case"t":return p("t"),p("r"),p("u"),p("e"),!0;case"f":return p("f"),p("a"),p("l"),p("s"),p("e"),!1;case"n":return p("n"),p("u"),p("l"),p("l"),null}f("Unexpected '"+u+"'")}()}},function(e,t){var n;return a=e+"",s=0,u=" ",n=c(),v(),u&&f("Syntax error"),"function"==typeof t?function e(n,r){var i,o=n[r];return o&&"object"==typeof o&&Object.keys(o).forEach((function(t){void 0!==(i=e(o,t))?o[t]=i:delete o[t]})),t.call(n,r,o)}({"":n},""):n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={invalidOperation:{code:434,reason:"非法操作"},closeNormal:{code:"0",reason:"wx: normally closed"},connectSocketFail:{code:"401",reason:"wx: connectSocket: fail"},reconnectFail:{code:"403",reason:"wx: maxceed reconnect times"},kicked:{code:"405",reason:"wx: kicked"},roomRefused:{code:"406",reason:"wx: roomRefused"},loginFailed:{code:"417",reason:"wx: login failed cause room destroyed"},loginFailedEncrypt:{code:"418",reason:"wx: login failed cause room no encryption"}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={connectSocketSuccess:{code:"200",desc:"wx: connectSocket: success"}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Config={heartbeatInterval:3e3,heartbeatOverTime:1e4,sendCommandOverTime:1e4}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pureLogger=void 0;var r=o(n(4)),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var s="%c WeAppRTC:: ",u=function(){function e(t){var n=t.debug;(0,r.default)(this,e),this.debug=n}return(0,i.default)(e,[{key:"log",value:function(e){if(this.debug){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return console.log(s+e,"color:#bada55",n)}}},{key:"warn",value:function(e){if(this.debug){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return console.warn(s+e,n)}}},{key:"error",value:function(e){if(this.debug){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return console.error(s+e,n)}}}]),e}();t.default=u;t.pureLogger={trace:function(){},debug:function(){},log:function(){},warn:function(){},error:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(4)),i=a(n(5)),o=a(n(15)),s=a(n(19)),u=a(n(25));function a(e){return e&&e.__esModule?e:{default:e}}var c=n(44).miniVersion,l=function(e){function t(){(0,r.default)(this,t);var e=(0,o.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._statisticsServer="",e._initStatistics(),e}return(0,s.default)(t,e),(0,i.default)(t,[{key:"_initStatistics",value:function(){this._statistics={ver:1,time:null,sdk_ver:c||"v4.0.0",platform:"mini",uid:null,cid:null,appkey:null,P2P:{value:0},meeting:{value:0},always_keep_calling:{value:0},miniapp_mode:null}}},{key:"updateStatisticsServer",value:function(e){this._statisticsServer=e}},{key:"updateStatistics",value:function(e){Object.assign(this._statistics,e),this.sendStatistics()}},{key:"sendStatistics",value:function(){var e=this;Object.assign(this._statistics,{time:+new Date});var t="https://statistic.live.126.net/statistic/realtime/sdkFunctioninfo";this._statisticsServer&&(t=this._statisticsServer);var n=this._statistics.platform;if(this._statistics.platform="mini","mini"===n||"wechat"===n)wx.request({url:t,method:"POST",data:this._statistics,header:{"content-type":"application/json"},complete:function(){e._initStatistics()}});else{if("qq"!==n)throw Error("DataReporter 不支持的平台");qq.request({url:t,method:"POST",data:this._statistics,header:{"content-type":"application/json"},complete:function(){e._initStatistics()}})}}}]),t}(u.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";var r="qq",i=n(132),o=n(138);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.merge(this,{options:e,debug:!1,api:"log",style:"color:#1cb977;",log:i.emptyFunc,info:i.emptyFunc,warn:i.emptyFunc,error:i.emptyFunc}),this.prefix=e.prefix||"",this.setDebug(e.debug),e.isSavedLogs&&(this.logHelper=new o(e))}var u=s.prototype,a=["Chrome","Safari","Firefox"];u.setDebug=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(t.debug=e,e.style&&(t.style=e.style),t.debug&&i.exist(console)){var n=console;t.debug=function(){this.logHelper&&this.logHelper.log(arguments);var e=t.formatArgs(arguments);-1!==a.indexOf(r)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("debug",e)},t.log=function(){this.logHelper&&this.logHelper.log(arguments);var e=t.formatArgs(arguments);-1!==a.indexOf(r)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("log",e)},t.info=function(){this.logHelper&&this.logHelper.log(arguments);var e=t.formatArgs(arguments);-1!==a.indexOf(r)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("info",e)},t.warn=function(){this.logHelper&&this.logHelper.log(arguments);var e=t.formatArgs(arguments);-1!==a.indexOf(r)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("warn",e)},t.error=function(){this.logHelper&&this.logHelper.log(arguments);var e=t.formatArgs(arguments);-1!==a.indexOf(r)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("error",e)},t._log=function(e,r){var o=t.options.logFunc,s=null;if(o&&(o[e]&&(s=o[e]),i.isFunction(s)))s.apply(o,r);else if(n[e])try{n[e].apply?t.chrome(e,r):t.ie(e,r)}catch(e){}},t.chrome=function(e,i){-1!==a.indexOf(r)?n[e].apply(n,i):t.ie(e,i)},t.ie=function(e,t){t.forEach((function(t){n[e](JSON.stringify(t,null,4))}))}}},u.formatArgs=function(e){e=[].slice.call(e,0);var t=new Date,n="[LOG "+(c(t.getMonth()+1)+"-"+c(t.getDate())+" "+c(t.getHours())+":"+c(t.getMinutes())+":"+c(t.getSeconds())+":"+c(t.getMilliseconds(),3))+" "+this.prefix.toUpperCase()+"]  ";return i.isString(e[0])?e[0]=n+e[0]:e.splice(0,0,n),e.forEach((function(t,n){(i.isArray(t)||i.isObject(t))&&(e[n]=i.simpleClone(t))})),e};var c=function(e,t){t=t||2;for(var n=""+e;n.length<t;)n="0"+n;return n};e.exports=s},function(e,t,n){"use strict";var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r};var s=n(133),u=n(134);function a(e){"object"===(void 0===e?"undefined":(0,o.default)(e))?(this.callFunc=e.callFunc||null,this.message=e.message||"UNKNOW ERROR"):this.message=e,this.time=new Date,this.timetag=+this.time}n(135);var c,l,f=n(136),p=f.getGlobal(),d=/\s+/;f.deduplicate=function(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t},f.capFirstLetter=function(e){return e?(e=""+e).slice(0,1).toUpperCase()+e.slice(1):""},f.guid=(c=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return c()+c()+c()+c()+c()+c()+c()+c()}),f.extend=function(e,t,n){for(var r in t)void 0!==e[r]&&!0!==n||(e[r]=t[r])},f.filterObj=function(e,t){var n={};return f.isString(t)&&(t=t.split(d)),t.forEach((function(t){e.hasOwnProperty(t)&&(n[t]=e[t])})),n},f.copy=function(e,t){return t=t||{},e?(Object.keys(e).forEach((function(n){f.exist(e[n])&&(t[n]=e[n])})),t):t},f.copyWithNull=function(e,t){return t=t||{},e?(Object.keys(e).forEach((function(n){(f.exist(e[n])||f.isnull(e[n]))&&(t[n]=e[n])})),t):t},f.findObjIndexInArray=function(e,t){e=e||[];var n=t.keyPath||"id",r=-1;return e.some((function(e,i){if(u(e,n)===t.value)return r=i,!0})),r},f.findObjInArray=function(e,t){var n=f.findObjIndexInArray(e,t);return-1===n?null:e[n]},f.mergeObjArray=function(){var e=[],t=[].slice.call(arguments,0,-1),n=arguments[arguments.length-1];f.isArray(n)&&(t.push(n),n={});var r,i=n.keyPath=n.keyPath||"id";for(n.sortPath=n.sortPath||i;!e.length&&t.length;)e=(e=t.shift()||[]).slice(0);return t.forEach((function(t){t&&t.forEach((function(t){-1!==(r=f.findObjIndexInArray(e,{keyPath:i,value:u(t,i)}))?e[r]=f.merge({},e[r],t):e.push(t)}))})),n.notSort||(e=f.sortObjArray(e,n)),e},f.cutObjArray=function(e){var t=e.slice(0),n=arguments.length,r=[].slice.call(arguments,1,n-1),i=arguments[n-1];f.isObject(i)||(r.push(i),i={});var o,s=i.keyPath=i.keyPath||"id";return r.forEach((function(e){f.isArray(e)||(e=[e]),e.forEach((function(e){e&&(i.value=u(e,s),-1!==(o=f.findObjIndexInArray(t,i))&&t.splice(o,1))}))})),t},f.sortObjArray=function(e,t){var n=(t=t||{}).sortPath||"id";s.insensitive=!!t.insensitive;var r,i,o,a=!!t.desc;return o=f.isFunction(t.compare)?t.compare:function(e,t){return r=u(e,n),i=u(t,n),a?s(i,r):s(r,i)},e.sort(o)},f.emptyFunc=function(){},f.isEmptyFunc=function(e){return e===f.emptyFunc},f.notEmptyFunc=function(e){return e!==f.emptyFunc},f.splice=function(e,t,n){return[].splice.call(e,t,n)},f.reshape2d=function(e,t){if(Array.isArray(e)){f.verifyParamType("type",t,"number","util::reshape2d");var n=e.length;if(n<=t)return[e];for(var r=Math.ceil(n/t),i=[],o=0;o<r;o++)i.push(e.slice(o*t,(o+1)*t));return i}return e},f.flatten2d=function(e){if(Array.isArray(e)){var t=[];return e.forEach((function(e){t=t.concat(e)})),t}return e},f.dropArrayDuplicates=function(e){if(Array.isArray(e)){for(var t={},n=[];e.length>0;){t[e.shift()]=!0}for(var r in t)!0===t[r]&&n.push(r);return n}return e},f.onError=function(e){throw new a(e)},f.verifyParamPresent=function(e,t,n,r){n=n||"";var i=!1;switch(f.typeOf(t)){case"undefined":case"null":i=!0;break;case"string":""===t&&(i=!0);break;case"StrStrMap":case"object":Object.keys(t).length||(i=!0);break;case"array":t.length?t.some((function(e){if(f.notexist(e))return i=!0,!0})):i=!0}i&&f.onParamAbsent(n+e,r)},f.onParamAbsent=function(e,t){f.onParamError("缺少参数 "+e+", 请确保参数不是 空字符串、空对象、空数组、null或undefined, 或数组的内容不是 null/undefined",t)},f.verifyParamAbsent=function(e,t,n,r){n=n||"",void 0!==t&&f.onParamPresent(n+e,r)},f.onParamPresent=function(e,t){f.onParamError("多余的参数 "+e,t)},f.verifyParamType=function(e,t,n,r){var i=f.typeOf(t).toLowerCase();f.isArray(n)||(n=[n]);var o=!0;switch(-1===(n=n.map((function(e){return e.toLowerCase()}))).indexOf(i)&&(o=!1),i){case"number":isNaN(t)&&(o=!1);break;case"string":"numeric or numeric string"===n.join("")&&(o=!!/^[0-9]+$/.test(t))}o||f.onParamInvalidType(e,n,"",r)},f.onParamInvalidType=function(e,t,n,r){n=n||"",t=f.isArray(t)?(t=t.map((function(e){return'"'+e+'"'}))).join(", "):'"'+t+'"',f.onParamError('参数"'+n+e+'"类型错误, 合法的类型包括: ['+t+"]",r)},f.verifyParamValid=function(e,t,n,r){f.isArray(n)||(n=[n]),-1===n.indexOf(t)&&f.onParamInvalidValue(e,n,r)},f.onParamInvalidValue=function(e,t,n){f.isArray(t)||(t=[t]),t=t.map((function(e){return'"'+e+'"'})),f.isArray(t)&&(t=t.join(", ")),f.onParamError("参数 "+e+"值错误, 合法的值包括: ["+JSON.stringify(t)+"]",n)},f.verifyParamMin=function(e,t,n,r){t<n&&f.onParamError("参数"+e+"的值不能小于"+n,r)},f.verifyParamMax=function(e,t,n,r){t>n&&f.onParamError("参数"+e+"的值不能大于"+n,r)},f.verifyArrayMax=function(e,t,n,r){t.length>n&&f.onParamError("参数"+e+"的长度不能大于"+n,r)},f.verifyEmail=(l=/^\S+@\S+$/,function(e,t,n){l.test(t)||f.onParamError("参数"+e+"邮箱格式错误, 合法格式必须包含@符号, @符号前后至少要各有一个字符",n)}),f.verifyTel=function(){var e=/^[+\-()\d]+$/;return function(t,n,r){e.test(n)||f.onParamError("参数"+t+"电话号码格式错误, 合法字符包括+、-、英文括号和数字",r)}}(),f.verifyBirth=function(){var e=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;return function(t,n,r){e.test(n)||f.onParamError("参数"+t+'生日格式错误, 合法为"yyyy-MM-dd"',r)}}(),f.onParamError=function(e,t){f.onError({message:e,callFunc:t})},f.verifyOptions=function(e,t,n,r,i){if(e=e||{},t&&(f.isString(t)&&(t=t.split(d)),f.isArray(t))){"boolean"!=typeof n&&(i=n||null,n=!0,r="");var o=n?f.verifyParamPresent:f.verifyParamAbsent;t.forEach((function(t){o.call(f,t,e[t],r,i)}))}return e},f.verifyParamAtLeastPresentOne=function(e,t,n){t&&(f.isString(t)&&(t=t.split(d)),f.isArray(t)&&(t.some((function(t){return f.exist(e[t])}))||f.onParamError("以下参数["+t.join(", ")+"]至少需要传入一个",n)))},f.verifyParamPresentJustOne=function(e,t,n){t&&(f.isString(t)&&(t=t.split(d)),f.isArray(t)&&1!==t.reduce((function(t,n){return f.exist(e[n])&&t++,t}),0)&&f.onParamError("以下参数["+t.join(", ")+"]必须且只能传入一个",n))},f.verifyBooleanWithDefault=function(e,t,n,r,i){f.undef(n)&&(n=!0),d.test(t)&&(t=t.split(d)),f.isArray(t)?t.forEach((function(t){f.verifyBooleanWithDefault(e,t,n,r,i)})):void 0===e[t]?e[t]=n:f.isBoolean(e[t])||f.onParamInvalidType(t,"boolean",r,i)},f.verifyFileInput=function(e,t){return f.verifyParamPresent("fileInput",e,"",t),f.isString(e)&&((e="undefined"==typeof document?void 0:document.getElementById(e))||f.onParamError("找不到要上传的文件对应的input, 请检查fileInput id "+e,t)),e.tagName&&"input"===e.tagName.toLowerCase()&&"file"===e.type.toLowerCase()||f.onParamError("请提供正确的 fileInput, 必须为 file 类型的 input 节点 tagname:"+e.tagName+", filetype:"+e.type,t),e},f.verifyFileType=function(e,t){f.verifyParamValid("type",e,f.validFileTypes,t)},f.verifyCallback=function(e,t,n){d.test(t)&&(t=t.split(d)),f.isArray(t)?t.forEach((function(t){f.verifyCallback(e,t,n)})):e[t]?f.isFunction(e[t])||f.onParamInvalidType(t,"function","",n):e[t]=f.emptyFunc},f.verifyFileUploadCallback=function(e,t){f.verifyCallback(e,"uploadprogress uploaddone uploaderror uploadcancel",t)},f.validFileTypes=["image","audio","video","file"],f.validFileExts={image:["bmp","gif","jpg","jpeg","jng","png","webp"],audio:["mp3","wav","aac","wma","wmv","amr","mp2","flac","vorbis","ac3"],video:["mp4","rm","rmvb","wmv","avi","mpg","mpeg"]},f.filterFiles=function(e,t){var n,r,i="file"===(t=t.toLowerCase()),o=[];return[].forEach.call(e,(function(e){if(i)o.push(e);else if(n=e.name.slice(e.name.lastIndexOf(".")+1),(r=e.type.split("/"))[0]&&r[1]){(r[0].toLowerCase()===t||-1!==f.validFileExts[t].indexOf(n))&&o.push(e)}})),o};var h,v,g=f.supportFormData=f.notundef(p.FormData);f.getFileName=function(e){return e=f.verifyFileInput(e),g?e.files[0].name:e.value.slice(e.value.lastIndexOf("\\")+1)},f.getFileInfo=(h={ppt:1,pptx:2,pdf:3},function(e){var t={};if(!(e=f.verifyFileInput(e)).files)return t;var n=e.files[0];return g&&(t.name=n.name,t.size=n.size,t.type=n.name.match(/\.(\w+)$/),t.type=t.type&&t.type[1].toLowerCase(),t.transcodeType=h[t.type]||0),t}),f.sizeText=(v=["B","KB","MB","GB","TB","PB","EB","ZB","BB"],function(e){var t,n=0;do{t=(e=Math.floor(100*e)/100)+v[n],e/=1024,n++}while(e>1);return t}),f.promises2cmds=function(e){return e.map((function(e){return e.cmd}))},f.objs2accounts=function(e){return e.map((function(e){return e.account}))},f.teams2ids=function(e){return e.map((function(e){return e.teamId}))},f.objs2ids=function(e){return e.map((function(e){return e.id}))},f.getMaxUpdateTime=function(e){var t=e.map((function(e){return+e.updateTime}));return Math.max.apply(Math,t)},f.genCheckUniqueFunc=function(e,t){return e=e||"id",t=t||1e3,function(t){this.uniqueSet=this.uniqueSet||{},this.uniqueSet[e]=this.uniqueSet[e]||{};var n=this.uniqueSet[e],r=t[e];return!n[r]&&(n[r]=!0,!0)}},f.fillPropertyWithDefault=function(e,t,n){return!!f.undef(e[t])&&(e[t]=n,!0)},e.exports=f},function(e,t){e.exports=function e(t,n){"use strict";var r,i,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,u=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,c=/^0/,l=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},f=l(t).replace(s,"")||"",p=l(n).replace(s,"")||"",d=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),v=parseInt(f.match(a),16)||1!==d.length&&f.match(u)&&Date.parse(f),g=parseInt(p.match(a),16)||v&&p.match(u)&&Date.parse(p)||null;if(g){if(v<g)return-1;if(v>g)return 1}for(var m=0,y=Math.max(d.length,h.length);m<y;m++){if(r=!(d[m]||"").match(c)&&parseFloat(d[m])||d[m]||0,i=!(h[m]||"").match(c)&&parseFloat(h[m])||h[m]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},function(e,t){e.exports=function(e,t){var n=t.split(".");for(;n.length;){var r=n.shift(),i=!1;if("?"==r[r.length-1]&&(r=r.slice(0,-1),i=!0),!(e=e[r])&&i)return e}return e}},function(e,t,n){"use strict";var r=n(63);"undefined"!=typeof window&&(window.console||r.isWeixinApp||(window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.url2origin=t.uniqueID=t.off=t.removeEventListener=t.on=t.addEventListener=t.format=t.regWhiteSpace=t.regBlank=t.emptyFunc=t.f=t.emptyObj=t.o=void 0;var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r};t.getGlobal=s,t.detectCSSFeature=function(e){var t=!1,n="Webkit Moz ms O".split(" ");if("undefined"==typeof document)return void console.log("error:fn:detectCSSFeature document is undefined");var r=document.createElement("div"),i=null;e=e.toLowerCase(),void 0!==r.style[e]&&(t=!0);if(!1===t){i=e.charAt(0).toUpperCase()+e.substr(1);for(var o=0;o<n.length;o++)if(void 0!==r.style[n[o]+i]){t=!0;break}}return t},t.fix=u,t.getYearStr=a,t.getMonthStr=c,t.getDayStr=l,t.getHourStr=f,t.getMinuteStr=p,t.getSecondStr=d,t.getMillisecondStr=h,t.dateFromDateTimeLocal=function(e){return e=""+e,new Date(e.replace(/-/g,"/").replace("T"," "))},t.getClass=m,t.typeOf=y,t.isString=b,t.isNumber=function(e){return"number"===y(e)},t.isBoolean=function(e){return"boolean"===y(e)},t.isArray=_,t.isFunction=w,t.isDate=O,t.isRegExp=function(e){return"regexp"===y(e)},t.isError=function(e){return"error"===y(e)},t.isnull=k,t.notnull=S,t.undef=E,t.notundef=N,t.exist=T,t.notexist=x,t.isObject=C,t.isEmpty=function(e){return x(e)||(b(e)||_(e))&&0===e.length},t.containsNode=function(e,t){if(e===t)return!0;for(;t.parentNode;){if(t.parentNode===e)return!0;t=t.parentNode}return!1},t.calcHeight=function(e){var t=e.parentNode||("undefined"==typeof document?null:document.body);if(!t)return 0;(e=e.cloneNode(!0)).style.display="block",e.style.opacity=0,e.style.height="auto",t.appendChild(e);var n=e.offsetHeight;return t.removeChild(e),n},t.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.dataset=function(e,t,n){if(!T(n))return e.getAttribute("data-"+t);e.setAttribute("data-"+t,n)},t.target=function(e){return e.target||e.srcElement},t.createIframe=function(e){if("undefined"==typeof document)return;var t;if((e=e||{}).name)try{(t=document.createElement('<iframe name="'+e.name+'"></iframe>')).frameBorder=0}catch(n){(t=document.createElement("iframe")).name=e.name}else t=document.createElement("iframe");e.visible||(t.style.display="none");w(e.onload)&&A(t,"load",(function n(r){t.src&&(e.multi||L(t,"load",n),e.onload(r))}));(e.parent||document.body).appendChild(t);var n=e.src||"about:blank";return setTimeout((function(){t.src=n}),0),t},t.html2node=function(e){if("undefined"==typeof document)return;var t=document.createElement("div");t.innerHTML=e;var n=[],r=void 0,i=void 0;if(t.children)for(r=0,i=t.children.length;r<i;r++)n.push(t.children[r]);else for(r=0,i=t.childNodes.length;r<i;r++){var o=t.childNodes[r];1===o.nodeType&&n.push(o)}return n.length>1?t:n[0]},t.scrollTop=function(e){"undefined"!=typeof document&&T(e)&&(document.documentElement.scrollTop=document.body.scrollTop=e);return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},t.forOwn=j,t.mixin=M,t.isJSON=D,t.parseJSON=function e(t){try{D(t)&&(t=JSON.parse(t)),C(t)&&j(t,(function(n,r){switch(y(r)){case"string":case"object":t[n]=e(r)}}))}catch(e){console.log("error:",e)}return t},t.simpleClone=function(e){var t=[],n=JSON.stringify(e,(function(e,n){if("object"===(void 0===n?"undefined":(0,o.default)(n))&&null!==n){if(-1!==t.indexOf(n))return;t.push(n)}return n}));return JSON.parse(n)},t.merge=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){M(e,t)})),e},t.fillUndef=function(e,t){return j(t,(function(t,n){E(e[t])&&(e[t]=n)})),e},t.checkWithDefault=function(e,t,n){var r=e[t]||e[t.toLowerCase()];x(r)&&(r=n,e[t]=r);return r},t.fetch=function(e,t){return j(e,(function(n,r){T(t[n])&&(e[n]=t[n])})),e},t.string2object=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n={};return e.split(t).forEach((function(e){var t=e.split("="),r=t.shift();r&&(n[decodeURIComponent(r)]=decodeURIComponent(t.join("=")))})),n},t.object2string=F,t.genUrlSep=function(e){return e.indexOf("?")<0?"?":"&"},t.object2query=function(e){return F(e,"&",!0)},t.isFileInput=B,t.getKeys=function(e,t){var n=Object.keys(e);t&&n.sort((function(t,n){var r=B(e[t]);return r===B(e[n])?0:r?1:-1}));return n};t.o={},t.emptyObj={},t.f=function(){},t.emptyFunc=function(){},t.regBlank=/\s+/gi,t.regWhiteSpace=/\s+/gi;function s(){return"undefined"!=typeof window?window:void 0!==e?e:{}}function u(e,t){t=t||2;for(var n=""+e;n.length<t;)n="0"+n;return n}function a(e){return""+e.getFullYear()}function c(e){return u(e.getMonth()+1)}function l(e){return u(e.getDate())}function f(e){return u(e.getHours())}function p(e){return u(e.getMinutes())}function d(e){return u(e.getSeconds())}function h(e){return u(e.getMilliseconds(),3)}var v,g;t.format=(v=/yyyy|MM|dd|hh|mm|ss|SSS/g,g={yyyy:a,MM:c,dd:l,hh:f,mm:p,ss:d,SSS:h},function(e,t){return e=new Date(e),isNaN(+e)?"invalid date":(t=t||"yyyy-MM-dd").replace(v,(function(t){return g[t](e)}))});function m(e){return Object.prototype.toString.call(e).slice(8,-1)}function y(e){return m(e).toLowerCase()}function b(e){return"string"===y(e)}function _(e){return"array"===y(e)}function w(e){return"function"===y(e)}function O(e){return"date"===y(e)}function k(e){return null===e}function S(e){return null!==e}function E(e){return void 0===e}function N(e){return void 0!==e}function T(e){return N(e)&&S(e)}function x(e){return E(e)||k(e)}function C(e){return T(e)&&"object"===y(e)}var R=t.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},A=t.on=R,P=t.removeEventListener=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},L=t.off=P;function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments[2];for(var r in e)e.hasOwnProperty(r)&&t.call(n,r,e[r])}function M(e,t){j(t,(function(t,n){e[t]=n}))}var I;t.uniqueID=(I=0,function(){return""+I++});function D(e){return b(e)&&0===e.indexOf("{")&&e.lastIndexOf("}")===e.length-1}function F(e,t,n){if(!e)return"";var r=[];return j(e,(function(e,t){w(t)||(O(t)?t=t.getTime():_(t)?t=t.join(","):C(t)&&(t=JSON.stringify(t)),n&&(t=encodeURIComponent(t)),r.push(encodeURIComponent(e)+"="+t))})),r.join(t||",")}t.url2origin=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){return e.test(t||"")?RegExp.$1.toLowerCase():""}}();function B(e){var t=s();return e.tagName&&"INPUT"===e.tagName.toUpperCase()||t.Blob&&e instanceof t.Blob}}).call(this,n(137))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;if(e.maxLogsLines&&"number"==typeof e.maxLogsLines&&!isNaN(e.maxLogsLines)||(e.maxLogsLines=5e3),e.logFilename&&(e.logFilename=e.logFilename+".txt"),t.useTimestamps=e.useTimestamps||!1,t.useLocalStorage=e.useLocalStorage||!1,t.autoTrim=!0,t.maxLines=e.maxLogsLines||5e3,t.tailNumLines=100,t.logFilename=e.logFilename||"nimWebRtcLog.txt",t.maxDepth=5,t.depth=0,t.parentSizes=[0],t.currentResult="",t.startTime=new Date,t.output="",this.getLog=function(){var e=new Date;if(t.useLocalStorage){var n=window.localStorage.getItem("nimWebRtcLog");n&&(n=JSON.parse(n),t.startTime=new Date(n.startTime),t.output=n.log,e=new Date(n.lastLog))}return t.output+"\n---- Log retrieved: "+e+" ----\n"+t.formatSessionDuration(t.startTime,e)},this.tail=function(e){e=e||t.tailLines;return t.trimLog(t.getLog(),e)},this.search=function(e){for(var n=t.output.split("\n"),r=new RegExp(e),i=[],o=0;o<n.length;o++){var s="["+o+"] ";n[o].match(r)&&i.push(s+n[o])}var u=i.join("\n");return 0==u.length&&(u='Nothing found for "'+e+'".'),u},this.getSlice=function(e,n){return t.output.split("\n").slice(e,e+n).join("\n")},this.downloadLog=function(){var e=t.getLog(),n=new Blob([e],{type:"data:text/plain;charset=utf-8"}),r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.target="_blank",r.download=t.logFilename,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(r.href)},this.clear=function(){var e=new Date;if(t.output="---- Log cleared: "+e+" ----\n",t.useLocalStorage){var n={startTime:t.startTime,log:t.output,lastLog:e};n=JSON.stringify(n),window.localStorage.setItem("nimWebRtcLog",n)}},this.log=function(e){var n=t.determineType(e);if(null!=n){var r=t.formatType(n,e);if(t.useTimestamps){var i=new Date;t.output+=t.formatTimestamp(i)}if(t.output+=r+"\n",t.autoTrim&&(t.output=t.trimLog(t.output,t.maxLines)),t.useLocalStorage){var o=new Date,s={startTime:t.startTime,log:t.output,lastLog:o};s=JSON.stringify(s),window.localStorage.setItem("nimWebRtcLog",s)}}t.depth=0,t.parentSizes=[0],t.currentResult=""},this.determineType=function(e){if(null!=e){var t,n=void 0===e?"undefined":(0,o.default)(e);if("object"==n)t=null==e.length?"function"==typeof e.getTime?"Date":"function"==typeof e.test?"RegExp":"Object":"Array";else t=n;return t}return null},this.formatType=function(e,n){if(t.maxDepth&&t.depth>=t.maxDepth)return"... (max-depth reached)";switch(e){case"Object":t.currentResult+="{\n",t.depth++,t.parentSizes.push(t.objectSize(n));var r=0;for(var i in n){t.currentResult+=t.indentsForDepth(t.depth),t.currentResult+=i+": ";var o=t.determineType(n[i]);(s=t.formatType(o,n[i]))?("function"!==o&&(t.currentResult+=s),r!=t.parentSizes[t.depth]-1&&(t.currentResult+=","),t.currentResult+="\n"):(r!=t.parentSizes[t.depth]-1&&(t.currentResult+=","),t.currentResult+="\n"),r++}if(t.depth--,t.parentSizes.pop(),t.currentResult+=t.indentsForDepth(t.depth),t.currentResult+="}",0==t.depth)return t.currentResult;break;case"Array":t.currentResult+="[",t.depth++,t.parentSizes.push(n.length);for(r=0;r<n.length;r++){var s;"Object"!=(o=t.determineType(n[r]))&&"Array"!=o||(t.currentResult+="\n"+t.indentsForDepth(t.depth)),(s=t.formatType(o,n[r]))?(t.currentResult+=s,r!=t.parentSizes[t.depth]-1&&(t.currentResult+=", "),"Array"==o&&(t.currentResult+="\n")):(r!=t.parentSizes[t.depth]-1&&(t.currentResult+=", "),("Object"!=o||r==t.parentSizes[t.depth]-1)&&(t.currentResult+="\n"))}if(t.depth--,t.parentSizes.pop(),t.currentResult+="]",0==t.depth)return t.currentResult;break;case"function":var u=(n+="").split("\n");for(r=0;r<u.length;r++)u[r].match(/\}/)&&t.depth--,t.currentResult+=t.indentsForDepth(t.depth),u[r].match(/\{/)&&t.depth++,t.currentResult+=u[r]+"\n";return t.currentResult;case"RegExp":return"/"+n.source+"/";case"Date":case"string":return t.depth>0||0==n.length?'"'+n+'"':n;case"boolean":return n?"true":"false";case"number":return n+""}},this.indentsForDepth=function(e){for(var t="",n=0;n<e;n++)t+="\t";return t},this.trimLog=function(e,t){var n=e.split("\n");return n.length>t&&(n=n.slice(n.length-t)),n.join("\n")},this.lines=function(){return t.output.split("\n").length},this.formatSessionDuration=function(e,t){var n=t-e,r=Math.floor(n/1e3/60/60),i=("0"+r).slice(-2);n-=1e3*r*60*60;var o=Math.floor(n/1e3/60),s=("0"+o).slice(-2);n-=1e3*o*60;var u=Math.floor(n/1e3);return n-=1e3*u,"---- Session duration: "+i+":"+s+":"+("0"+u).slice(-2)+" ----"},this.formatTimestamp=function(e){var t=e.getFullYear(),n=e.getDate();return"["+t+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+n+" "+Number(e.getHours())+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"]: "},this.objectSize=function(e){var t,n=0;for(t in e)e.hasOwnProperty&&e.hasOwnProperty(t)&&n++;return n},t.useLocalStorage){var n=window.localStorage.getItem("nimWebRtcLog");if(n){n=JSON.parse(n),t.output=n.log;var r=new Date(n.startTime),i=new Date(n.lastLog);t.output+="\n---- Session end: "+n.lastLog+" ----\n",t.output+=t.formatSessionDuration(r,i),t.output+="\n\n"}}t.output+="---- Session started: "+t.startTime+" ----\n\n"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(41)),i=c(n(42)),o=c(n(26)),s=n(28),u=c(n(140)),a=c(n(64));function c(e){return e&&e.__esModule?e:{default:e}}var l=n(63),f=n(44).miniVersion,p=(n(143),n(27)),d={init:function(){return Promise.resolve()},join:function(e){var t=this;if(this._status.isInTheRoom)return this.logger.log("正在房间中，请勿重复加入！"),Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"重复加入房间"}));this.logger.log("join: ",JSON.stringify(e,null," ")),this._updateStatus({isInTheRoom:!0});var n=this,r=null;o.default.verifyOptions(e,"channelName"),this.logger.log("开始请求小程序网关地址"),"number"!=typeof e.uid||isNaN(e.uid)?"string"==typeof e.uid?(console.log("uid是string"),r=new p(e.uid)):p.isBigNumber(e.uid)?r=e.uid:null!=e.uid&&null!=e.uid||(r=new p(o.default.uuid())):(console.log("uid是number"),r=e.uid),n._updateStatus({joinChannelParam:e}),e.scene=s.SESSION_MODE.MEETING,n._dataReporter.updateStatistics(Object.assign({},{appkey:n._status.appkey,uid:r,miniapp_mode:e.mode?e.mode:0,platform:n._status.runtimeEnvironment},{meeting:{value:1}}));var i=+new Date,u=Date.now();n._info.joinChannelParam=e;var c=l.miniG2.getChannelInfoUrl;return e.channelServer&&(c=e.channelServer),this._status.channelServer=e.channelServer,this._status.statisticsServer=e.statisticsServer,this._dataReporter&&this._dataReporter.updateStatisticsServer(e.statisticsServer),this._info.uid=r,new Promise((function(s,l){return o.default.post({uid:r,appkey:n._status.appkey,channelName:e.channelName,secureType:e.token?"1":"2",osType:"4",mode:2,netType:"0",version:f+".0"||!1,curtime:i,checksum:e.token?e.token:(0,a.default)(n._status.appkey+"."+r.toString()+"."+i),nrtcg2:1,t1:u},{url:c,runtimeEnvironment:t._status.runtimeEnvironment}).then((function(i){if(200===i.code){t.logger.log("请求到房间信息");var o=i.ips,u=void 0===o?{}:o,a=i.time,c=void 0===a?{}:a;if(!u.wechatapparray)return t.logger.error("服务器没有返回网关地址，加入房间失败"),t.apiEventReport("setLogin",{a_record:!!n._info.joinChannelParam.recordAudio,v_record:!!n._info.joinChannelParam.recordVideo,record_type:n._info.joinChannelParam.recordType?n._info.joinChannelParam.recordType+"":"0",host_speaker:!!n._info.joinChannelParam.isHostSpeaker,result:-2,serverIp:u.wechatapparray||""}),n._updateStatus({isInTheRoom:!1}),l("no address");Object.assign(n._status.createChannelResponse,i,e),n._status.createChannelResponse.token=i.token,n._status.createChannelResponse.uid=r,n._info.T4=Date.now();var f=n._info.T4-c.t1-(c.t3-c.t2);n._info.clientNtpTime=c.t3+Math.round(f/2);var d=n._generateJoinParam(e);d.role="broadcaster"===t._status.role?0:1,d.dualAudio=0,n._info.dualAudio=d.dualAudio,n._info.joinChannelParam=d,t.logger.log("开始joinChannel: ",d),n._wsController.joinChannel(d).then((function(){t._info.cid=i.cid,n._dataReporter.updateStatistics({cid:t._info.cid,appkey:n._status.appkey,uid:r}),t.logger.log("开始joinChannel 加入房间成功"),s({cid:i.cid,code:i.code,uid:p.isBigNumber(r)?r.toString():r})})).catch((function(e){t.logger.error("开始joinChannel 加入房间失败: ",e),l(e)}))}else t.logger.error("小程序网关地址请求失败: ",i),t.apiEventReport("setLogin",{a_record:!!n._info.joinChannelParam.recordAudio,v_record:!!n._info.joinChannelParam.recordVideo,record_type:n._info.joinChannelParam.recordType?n._info.joinChannelParam.recordType+"":"0",host_speaker:!!n._info.joinChannelParam.isHostSpeaker,result:i.code,serverIp:n._info.joinChannelParam.address||""}),n._updateStatus({isInTheRoom:!1}),l(i)})).catch((function(e){t.apiEventReport("setLogin",{a_record:!!n._info.joinChannelParam.recordAudio,v_record:!!n._info.joinChannelParam.recordVideo,record_type:n._info.joinChannelParam.recordType?n._info.joinChannelParam.recordType+"":"0",host_speaker:!!n._info.joinChannelParam.isHostSpeaker,result:-2,serverIp:n._info.joinChannelParam.address||""}),n._updateStatus({isInTheRoom:!1}),l(e)}))}))},setRole:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"broadcaster";return(0,i.default)(r.default.mark((function n(){return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.logger.log("NErtc::setRole role:"+t+", publishAudio: "+e._status.publishAudio+", publishVideo: "+e._status.publishVideo),e._status.role=t,e._status.isInTheRoom){n.next=5;break}return e.logger.log("NErtc::setRole 当前不在房间中"),n.abrupt("return");case 5:if(n.prev=5,"audience"!=t){n.next=13;break}if(!e._status.publishAudio){n.next=10;break}return n.next=10,e.unpublish("audio");case 10:if(!e._status.publishVideo){n.next=13;break}return n.next=13,e.unpublish("video");case 13:return n.next=15,e._wsController.changeRole("audience"==t?1:0);case 15:return e.apiEventReport("setFunction",{name:"setRole",oper:"1",value:t}),n.abrupt("return");case 19:return n.prev=19,n.t0=n.catch(5),n.abrupt("return",Promise.reject(n.t0));case 22:case"end":return n.stop()}}),n,e,[[5,19]])})))()},publish:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,i.default)(r.default.mark((function n(){return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.logger.log("NErtc::publish mediaType:"+t+", publishAudio: "+e._status.publishAudio+", publishVideo: "+e._status.publishVideo+", role: "+e._status.role),e._status.isInTheRoom){n.next=6;break}return e.logger.log("NErtc::publish 当前不在房间中，无法进行publish操作"),n.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"在join之前，不允许执行publish操作"})));case 6:if("audio"===t||"video"===t||""===t){n.next=11;break}return e.logger.log("NErtc::publish mediaType参数错误"),n.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"publish接口mediaType参数错误"})));case 11:if("audience"!=e._status.role){n.next=14;break}return e.logger.log("NErtc::publish 当前是观众模式"),n.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"观众角色不允许publish"})));case 14:if("audio"!==t||!e._status.publishAudio){n.next=19;break}return e.logger.log("NErtc::publish 音频已经publish，重复"),n.abrupt("return",e._info.pushUrl);case 19:if("video"!==t||!e._status.publishVideo){n.next=24;break}return e.logger.log("NErtc::publish 视频已经publish，重复"),n.abrupt("return",e._info.pushUrl);case 24:if(!e._status.publishAudio||!e._status.publishVideo){n.next=27;break}return e.logger.log("NErtc::publish 音视频已经publish，重复"),n.abrupt("return",e._info.pushUrl);case 27:return n.abrupt("return",new Promise(function(){var n=(0,i.default)(r.default.mark((function n(o,s){var u;return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=setInterval((0,i.default)(r.default.mark((function n(){return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.logger.log("NErtc::publish 定时器 推流地址： ",e._info.pushUrl),"broadcaster"!==e._status.role&&(e.logger.log("NErtc::publish 异步操作，角色已经发送了变化"),clearInterval(u),u=null,o()),!e._info.pushUrl){n.next=31;break}if(clearInterval(u),u=null,e.apiEventReport("setFunction",{name:"publish",oper:"1",value:"success"}),e.logger.log("NErtc::publish 定时器发送publish消息"),n.prev=7,!t){n.next=15;break}return e.logger.log("publish: ",t),n.next=12,e._wsController.publish(t);case 12:"audio"===t?e._status.publishAudio=!0:"video"===t&&(e._status.publishVideo=!0),n.next=25;break;case 15:if(e._status.publishAudio){n.next=19;break}return e.logger.log("publish audio"),n.next=19,e._wsController.publish("audio");case 19:if(e._status.publishVideo){n.next=23;break}return e.logger.log("publish video"),n.next=23,e._wsController.publish("video");case 23:e._status.publishAudio=!0,e._status.publishVideo=!0;case 25:o(e._info.pushUrl),n.next=31;break;case 28:n.prev=28,n.t0=n.catch(7),s(n.t0);case 31:case"end":return n.stop()}}),n,e,[[7,28]])}))),100),setTimeout((function(){clearInterval(u),u=null,e._info.pushUrl||(e.logger.error("NErtc::publish 没有获取到推流地址"),e.apiEventReport("setFunction",{name:"publish",oper:"1",value:"failed"}),s("no pushUrl"))}),5e3);case 2:case"end":return n.stop()}}),n,e)})));return function(e,t){return n.apply(this,arguments)}}()));case 28:case"end":return n.stop()}}),n,e)})))()},unpublish:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,i.default)(r.default.mark((function n(){return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.logger.log("NErtc::unpublish mediaType:"+t+", publishAudio: "+e._status.publishAudio+", publishVideo: "+e._status.publishVideo),e._status.isInTheRoom){n.next=6;break}return e.logger.log("NErtc::unpublish 不正在房间中，请勿调用！"),n.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"在join之前，不允许执行unpublish操作"})));case 6:if("audio"===t||"video"===t||""===t){n.next=9;break}return e.logger.log("NErtc::unpublish mediaType参数错误"),n.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"unpublish接口mediaType参数错误"})));case 9:if("audio"!==t||e._status.publishAudio){n.next=13;break}return n.abrupt("return");case 13:if("video"!==t||e._status.publishVideo){n.next=17;break}return n.abrupt("return");case 17:if(e._status.publishAudio||e._status.publishVideo){n.next=19;break}return n.abrupt("return");case 19:if(e.logger.log("NErtc::unpublish 停止发布媒体: ",e._info.pushUrl),n.prev=20,!t){n.next=27;break}return n.next=24,e._wsController.unpublish(t);case 24:"audio"===t?e._status.publishAudio=!1:"video"===t&&(e._status.publishVideo=!1),n.next=35;break;case 27:if(!e._status.audio){n.next=30;break}return n.next=30,e._wsController.unpublish("audio");case 30:if(!e._status.video){n.next=33;break}return n.next=33,e._wsController.unpublish("video");case 33:e._status.publishAudio=!1,e._status.publishVideo=!1;case 35:return e.apiEventReport("setFunction",{name:"unpublish",oper:"1",value:"success"}),n.abrupt("return");case 39:return n.prev=39,n.t0=n.catch(20),n.abrupt("return",Promise.reject(n.t0));case 42:case"end":return n.stop()}}),n,e,[[20,39]])})))()},subscribe:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.default)(r.default.mark((function i(){var o,u,a,c;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t._status.isInTheRoom){r.next=5;break}return t.logger.log("NErtc::subscribe 不正在房间中，请勿调用！"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"在join之前，不允许执行unpublish操作"})));case 5:if("audio"===n||"video"===n||"screenShare"===n){r.next=10;break}return t.logger.log("NErtc::subscribe mediaType参数错误"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"subscribe接口mediaType参数错误"})));case 10:if(e&&t._info.userlist.get(e.toString())){r.next=13;break}return t.logger.log("NErtc::subscribe "+e+" 不正在房间中，或者没有发布媒体"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:e+" 不正在房间中，或者没有发布媒体"})));case 13:if(o=e,t.logger.log("NErtc::subscribe 订阅媒体: ",n),t.logger.log("NErtc::subscribe 订阅媒体 uid: ",o),"string"==typeof e&&(o=new p(e),t.logger.log("NErtc::subscribe 订阅媒体 remoteUid: ",o)),t.apiEventReport("setFunction",{name:"subscribe",oper:o.toString(),value:"success"}),r.prev=18,t.logger.log("NErtc::subscribe 开始发送sub消息"),(u=t._info.userlist.get(o.toString())).subscribed[n]=!0,"slaveAudio"!==n){r.next=33;break}if(t._info.userlist.set(o.toString(),u),a=2,u.subscribed.userSubAudio){r.next=29;break}return r.next=28,t._wsController.subscribe(o,"audio");case 28:a=1;case 29:return r.next=31,t._wsController.subscribe(o,n,a);case 31:r.next=55;break;case 33:if("audio"!==n){r.next=52;break}if(u.subscribed.userSubAudio){r.next=41;break}return u.subscribed.userSubAudio=!0,t._info.userlist.set(o.toString(),u),r.next=39,t._wsController.subscribe(o,n);case 39:r.next=42;break;case 41:t._info.userlist.set(o.toString(),u);case 42:if(!(u=t._info.userlist.get(o.toString())).subscribed.slaveAudio){r.next=48;break}return r.next=46,t._wsController.subscribe(o,"slaveAudio",2);case 46:r.next=50;break;case 48:return r.next=50,t._wsController.subscribe(o,"slaveAudio",0);case 50:r.next=55;break;case 52:return t._info.userlist.set(o.toString(),u),r.next=55,t._wsController.subscribe(o,n);case 55:return t.logger.log("NErtc::subscribe 订阅 "+o+" 的 "+n+"媒体的请求, 发送成功"),c=u.url,t.logger.log("user: ",u),"screenShare"===n&&(c=u.screen_url),t.logger.log("NErtc::subscribe 订阅 "+u.uid+" 的 "+n+" 成功: "+c),r.abrupt("return",Promise.resolve({uid:p.isBigNumber(e)?e.toString():e,url:c}));case 63:return r.prev=63,r.t0=r.catch(18),t.logger.log("NErtc::subscribe 订阅媒体: ",n,"失败: ",r.t0),r.abrupt("return",Promise.reject(r.t0));case 67:case"end":return r.stop()}}),i,t,[[18,63]])})))()},unsubscribe:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.default)(r.default.mark((function i(){var o;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t._status.isInTheRoom){r.next=5;break}return t.logger.log("NErtc::unsubscribe 不正在房间中，请勿调用！"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"在join之前，不允许执行unpublish操作"})));case 5:if("audio"===n||"video"===n||"screenShare"===n){r.next=10;break}return t.logger.log("NErtc::unsubscribe mediaType参数错误"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"unsubscribe接口mediaType参数错误"})));case 10:if(e&&t._info.userlist.get(e.toString())){r.next=13;break}return t.logger.log("NErtc::unsubscribe "+e+" 不正在房间中，或者没有发布媒体"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:e+" 不正在房间中，或者没有发布媒体"})));case 13:if("string"==typeof e&&(e=new p(e)),t.logger.log("NErtc::unsubscribe 停止订阅 "+e+" 的 "+n+" 媒体"),(o=t._info.userlist.get(e.toString())).subscribed[n]=!1,"slaveAudio"!==n){r.next=28;break}if(t._info.userlist.set(e.toString(),o),o.subscribed.userSubAudio){r.next=24;break}return r.next=22,t._wsController.unsubscribe(e,"audio");case 22:r.next=26;break;case 24:return r.next=26,t._wsController.unsubscribe(e,n,0);case 26:r.next=44;break;case 28:if("audio"!==n){r.next=41;break}if(!o.subscribed.slaveAudio){r.next=35;break}return t._info.userlist.set(e.toString(),o),r.next=33,t._wsController.unsubscribe(e,"slaveAudio",1);case 33:r.next=39;break;case 35:return o.subscribed.userSubAudio=!1,t._info.userlist.set(e.toString(),o),r.next=39,t._wsController.unsubscribe(e,n);case 39:r.next=44;break;case 41:return t._info.userlist.set(e.toString(),o),r.next=44,t._wsController.unsubscribe(e,n);case 44:t.apiEventReport("setFunction",{name:"unsubscribe",oper:e.toString(),value:"success"});case 45:case"end":return r.stop()}}),i,t)})))()},mute:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,i.default)(r.default.mark((function i(){return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e._status.isInTheRoom){r.next=5;break}return e.logger.log("NErtc::mute 不正在房间中，请勿调用！"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"在join之前，不允许执行mute操作"})));case 5:if("audio"===t||"video"===t){r.next=8;break}return e.logger.log("NErtc::mute mediaType参数错误"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"mute接口mediaType参数错误"})));case 8:if(e.logger.log("NErtc::mute: ",t),r.prev=9,!t){r.next=15;break}return r.next=13,e._wsController.mute(n,t);case 13:r.next=19;break;case 15:return r.next=17,e._wsController.mute(n,"audio");case 17:return r.next=19,e._wsController.mute(n,"video");case 19:return e.apiEventReport("setFunction",{name:"mute",oper:"1",value:"success"}),r.abrupt("return");case 23:return r.prev=23,r.t0=r.catch(9),r.abrupt("return",Promise.reject(r.t0));case 26:case"end":return r.stop()}}),i,e,[[9,23]])})))()},unmute:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,i.default)(r.default.mark((function i(){return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e._status.isInTheRoom){r.next=5;break}return e.logger.log("NErtc::unmute 不正在房间中，请勿调用！"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"在join之前，不允许执行mute操作"})));case 5:if("audio"===t||"video"===t){r.next=8;break}return e.logger.log("NErtc::unmute mediaType参数错误"),r.abrupt("return",Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"unmute接口mediaType参数错误"})));case 8:if(e.logger.log("NErtc::unmute: ",t),r.prev=9,!t){r.next=15;break}return r.next=13,e._wsController.unmute(n,t);case 13:r.next=19;break;case 15:return r.next=17,e._wsController.unmute(n,"audio");case 17:return r.next=19,e._wsController.unmute(n,"video");case 19:return e.apiEventReport("setFunction",{name:"unmute",oper:"1",value:"success"}),r.abrupt("return");case 23:return r.prev=23,r.t0=r.catch(9),r.abrupt("return",Promise.reject(r.t0));case 26:case"end":return r.stop()}}),i,e,[[9,23]])})))()},dataReporter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"push",t=arguments[1],n=arguments[2];this.apiEventReport("setFunction",{name:t,oper:e,value:JSON.stringify(n,null," ")})},apiEventReport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"setFunction",t=arguments[1];if(e){var n=new u.default({channelInfo:Object.assign(this._info,this._status)});n[e](Object.assign({uid:""+this._info.uid,cid:""+this._info.cid,time:Date.now()},t)),n.send(),n=null}},leave:function(){return this._status.isInTheRoom?(this.apiEventReport("setLogout",{reason:0}),this._updateStatus({isInTheRoom:!1}),this._dataReporter.sendStatistics(),this._resetStatus(),this._wsController.leaveChannel()):(this.logger.log("不在房间中，请勿重复离开"),Promise.reject(Object.assign(s.CONSTANT_ERROR.invalidOperation,{reason:"重复离开房间"})))},switchMode:function(e){return o.default.isNumber(e)?(this._dataReporter.updateStatistics({miniapp_mode:e}),this.logger.log("设置推流模式: ",e),this._wsController.switchMode(e)):Promise.reject("switchMode: 入参类型必须为Number")},getUploadUserList:function(){return this._wsController._websocket.getUploadUserList()},_generateJoinParam:function(e){var t={},n=this._status.createChannelResponse;return t.cid=parseInt(n.cid),t.uid=n.uid,t.token=n.token,t.mode=parseInt(e.mode),t.scene=n.scene,t.liveEnable=e.liveEnable?s.LIVE_ENABLE.LIVE_ENABLE_OPEN:s.LIVE_ENABLE.LIVE_ENABLE_CLOSE,t.role=e.role?s.ROLE_FOR_MEETING.ROLE_AUDIENCE:s.ROLE_FOR_MEETING.ROLE_HOST,t.webrtc=1,t.address=e.address||"wss://"+n.ips.wechatapparray[0],t.edgeAddr=e.edgeAddr||n.ips.turnaddrs[0][0],t.recordType=e.recordType?e.recordType:s.RECORD_TYPE.RECORD_TYPE_MIX_SINGLE,t.recordAudio=e.recordAudio?s.RECORD_AUDIO.RECORD_AUDIO_OPEN:s.RECORD_AUDIO.RECORD_AUDIO_CLOSE,t.recordVideo=e.recordVideo?s.RECORD_VIDEO.RECORD_VIDEO_OPEN:s.RECORD_VIDEO.RECORD_VIDEO_CLOSE,t.isHostSpeaker=e.isHostSpeaker?1:0,this.logger.log("NErtc::joinChannel",t),t},_getLink:function(){return this._wsController._websocket}};t.default=d,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(4)),i=s(n(5)),o=s(n(64));function s(e){return e&&e.__esModule?e:{default:e}}var u=n(44).miniVersion,a=function(){function e(t){(0,r.default)(this,e),this.channelInfo=t.channelInfo||{},this.cid=""+this.channelInfo.cid,this.uid=""+this.channelInfo.uid;var n=this.channelInfo.startSessionTime||Date.now();this.time=this.channelInfo.clientNtpTime-this.channelInfo.T4,this.common={ver:"2.0",sdk_type:"nrtc2",session_id:(0,o.default)(this.cid+":"+this.uid+":"+n),app_key:this.channelInfo.appkey||""},this.platform="mini",this.model=this.channelInfo.runtimeEnvironment||"mini",this.event=[],this.api=null,this.heartbeat=null}return(0,i.default)(e,[{key:"addEvent",value:function(e){return-1==this.event.indexOf(e)&&this.event.push(e),this}},{key:"updateCommon",value:function(e){return Object.assign(this.common,e),this}},{key:"setEvent",value:function(e,t){this.addEvent(e),this[e]=t}},{key:"setHeartbeat",value:function(e){var t=this,n=e.uid,r=e.cid,i=e.sys,o=e.tx,s=e.rx;this.heartbeat={uid:n,cid:r,sys:i,tx:o,rx:s},this.api=this.adapterRef.apiEvents.length?this.adapterRef.apiEvents:this.adapterRef.apiEvent;var u={apiEvent:[]};for(var a in this.api)this.api[a].length&&this.api[a].forEach((function(e){e.uid=t.uid-0,e.cid=t.cid-0})),u.apiEvent=u.apiEvent.concat(this.api[a]);return this.api=null,this.api=u.apiEvent.length?u:null,this.adapterRef.apiEvents={},this.adapterRef.apiEvent={},this}},{key:"setLogin",value:function(e){var t=e.uid,n=e.cid,r=e.sdk_ver,i=void 0===r?u:r,o=(e.platform,e.app_key),s=void 0===o?this.common.app_key:o,a=e.meeting_mode,c=void 0===a?1:a,l=e.a_record,f=e.v_record,p=e.record_type,d=e.host_speaker,h=e.server_ip,v=e.result,g=e.time,m=e.signal_time_elapsed,y=e.time_elapsed;this.addEvent("login"),g=this.time+g,this.login={uid:t,cid:n,sdk_ver:i,platform:this.platform,model:this.model,app_key:s,meeting_mode:c,a_record:l,v_record:f,record_type:p,host_speaker:d,server_ip:h,result:v,time:g,signal_time_elapsed:m,time_elapsed:y}}},{key:"setRelogin",value:function(e){var t=e.uid,n=e.cid,r=e.meeting_mode,i=void 0===r?1:r,o=e.a_record,s=e.v_record,u=e.record_type,a=e.host_speaker,c=e.server_ip,l=e.result,f=e.time,p=e.reason;this.addEvent("relogin"),f=this.time+f,this.relogin={uid:t,cid:n,platform:this.platform,meeting_mode:i,a_record:o,v_record:s,record_type:u,host_speaker:a,server_ip:c,result:l,time:f,reason:p}}},{key:"setLogout",value:function(e){var t=e.uid,n=e.cid,r=e.time,i=e.reason;this.addEvent("logout"),r=this.time+r,this.logout={uid:t,cid:n,time:r,reason:i}}},{key:"deviceAbnormal",value:function(e){var t=e.uid,n=e.cid;this.addEvent("deviceAbnormal"),time=this.time+time,this.deviceAbnormal={uid:t,cid:n}}},{key:"setDisconnect",value:function(e){var t=e.uid,n=e.cid,r=e.reason,i=e.time;this.addEvent("disconnect"),i=this.time+i,this.disconnect={uid:t,cid:n,reason:r,time:i}}},{key:"setRecvFirstFrame",value:function(e){var t=e.uid,n=e.cid,r=e.pull_uid,i=e.time,o=e.media_type;this.addEvent("recvFirstFrame"),i=this.time+i,this.recvFirstFrame={uid:t,cid:n,pull_uid:r,time:i,media_type:o}}},{key:"setSendFirstPackage",value:function(e){var t=e.uid,n=e.cid,r=e.time,i=e.media_type;this.addEvent("firstPacketSent"),r=this.time+r,this.firstPacketSent={uid:t,cid:n,time:r,media_type:i}}},{key:"setRecvFirstPackage",value:function(e){var t=e.uid,n=e.cid,r=e.pull_uid,i=e.time,o=e.media_type;this.addEvent("recvFirstPackage"),i=this.time+i,this.recvFirstPackage={uid:t,cid:n,pull_uid:r,time:i,media_type:o}}},{key:"setFunction",value:function(e){var t=e.uid,n=e.cid,r=e.oper,i=e.value,o=e.time,s=e.name;this.addEvent("function"),o=this.time+o,this.function={uid:t,cid:n,oper:r,value:i,time:o,name:s}}},{key:"reset",value:function(){this.event=[],this.api=null,this.heartbeat=null}},{key:"send",value:function(e){var t=this,n={common:this.common};if(e||(e=this.event||null),this.heartbeat&&(n.heartbeat=this.heartbeat,this.api&&(n.event=this.api)),e)e.length&&(n.event=e.reduce((function(e,n){return e[n]=t[n],e}),{}));else if(!this.heartbeat)return this;var r="https://statistic.live.126.net/statics/report/common/form";this.channelInfo.statisticsServer&&(r=this.channelInfo.statisticsServer);var i=this;if("mini"===this.model||"wechat"===this.model)wx.request({method:"post",url:r,data:n,header:{"content-type":"application/json",sdktype:this.common.sdk_type,appkey:this.common.app_key,platform:this.platform,sdkver:u},complete:function(){"function"==typeof i.reset&&i.reset()}});else{if("qq"!==this.model)throw Error("FunctionReport 不支持的平台");qq.request({method:"post",url:r,data:n,header:{"content-type":"application/json",sdktype:this.common.sdk_type,appkey:this.common.app_key,platform:this.platform,sdkver:u},complete:function(){"function"==typeof i.reset&&i.reset()}})}return this}}]),e}();t.default=a,e.exports=t.default},function(e,t){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?t.push(n.charAt(i>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}},e.exports=r},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){(function(e){var r,i=function(e){"use strict";var t=1e7,n=9007199254740992,r=f(n),o="function"==typeof BigInt;function s(e,t,n,r){return void 0===e?s[0]:void 0!==t&&(10!=+t||n)?U(e,t,n,r):J(e)}function u(e,t){this.value=e,this.sign=t,this.isSmall=!1}function a(e){this.value=e,this.sign=e<0,this.isSmall=!0}function c(e){this.value=e}function l(e){return-n<e&&e<n}function f(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function p(e){d(e);var n=e.length;if(n<4&&x(e,r)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function d(e){for(var t=e.length;0===e[--t];);e.length=t+1}function h(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function v(e){return e>0?Math.floor(e):Math.ceil(e)}function g(e,n){var r,i,o=e.length,s=n.length,u=new Array(o),a=0,c=t;for(i=0;i<s;i++)a=(r=e[i]+n[i]+a)>=c?1:0,u[i]=r-a*c;for(;i<o;)a=(r=e[i]+a)===c?1:0,u[i++]=r-a*c;return a>0&&u.push(a),u}function m(e,t){return e.length>=t.length?g(e,t):g(t,e)}function y(e,n){var r,i,o=e.length,s=new Array(o),u=t;for(i=0;i<o;i++)r=e[i]-u+n,n=Math.floor(r/u),s[i]=r-n*u,n+=1;for(;n>0;)s[i++]=n%u,n=Math.floor(n/u);return s}function b(e,t){var n,r,i=e.length,o=t.length,s=new Array(i),u=0;for(n=0;n<o;n++)(r=e[n]-u-t[n])<0?(r+=1e7,u=1):u=0,s[n]=r;for(n=o;n<i;n++){if(!((r=e[n]-u)<0)){s[n++]=r;break}r+=1e7,s[n]=r}for(;n<i;n++)s[n]=e[n];return d(s),s}function _(e,t,n){var r,i,o=e.length,s=new Array(o),c=-t;for(r=0;r<o;r++)i=e[r]+c,c=Math.floor(i/1e7),i%=1e7,s[r]=i<0?i+1e7:i;return"number"==typeof(s=p(s))?(n&&(s=-s),new a(s)):new u(s,n)}function w(e,t){var n,r,i,o,s=e.length,u=t.length,a=h(s+u);for(i=0;i<s;++i){o=e[i];for(var c=0;c<u;++c)n=o*t[c]+a[i+c],r=Math.floor(n/1e7),a[i+c]=n-1e7*r,a[i+c+1]+=r}return d(a),a}function O(e,n){var r,i,o=e.length,s=new Array(o),u=t,a=0;for(i=0;i<o;i++)r=e[i]*n+a,a=Math.floor(r/u),s[i]=r-a*u;for(;a>0;)s[i++]=a%u,a=Math.floor(a/u);return s}function k(e,t){for(var n=[];t-- >0;)n.push(0);return n.concat(e)}function S(e,n,r){return new u(e<t?O(n,e):w(n,f(e)),r)}function E(e){var t,n,r,i,o=e.length,s=h(o+o);for(r=0;r<o;r++){n=0-(i=e[r])*i;for(var u=r;u<o;u++)t=i*e[u]*2+s[r+u]+n,n=Math.floor(t/1e7),s[r+u]=t-1e7*n;s[r+o]=n}return d(s),s}function N(e,t){var n,r,i,o,s=e.length,u=h(s);for(i=0,n=s-1;n>=0;--n)i=(o=1e7*i+e[n])-(r=v(o/t))*t,u[n]=0|r;return[u,0|i]}function T(e,n){var r,i=J(n);if(o)return[new c(e.value/i.value),new c(e.value%i.value)];var l,g=e.value,m=i.value;if(0===m)throw new Error("Cannot divide by zero");if(e.isSmall)return i.isSmall?[new a(v(g/m)),new a(g%m)]:[s[0],e];if(i.isSmall){if(1===m)return[e,s[0]];if(-1==m)return[e.negate(),s[0]];var y=Math.abs(m);if(y<t){l=p((r=N(g,y))[0]);var _=r[1];return e.sign&&(_=-_),"number"==typeof l?(e.sign!==i.sign&&(l=-l),[new a(l),new a(_)]):[new u(l,e.sign!==i.sign),new a(_)]}m=f(y)}var w=x(g,m);if(-1===w)return[s[0],e];if(0===w)return[s[e.sign===i.sign?1:-1],s[0]];l=(r=g.length+m.length<=200?function(e,n){var r,i,o,s,u,a,c,l=e.length,f=n.length,d=t,v=h(n.length),g=n[f-1],m=Math.ceil(d/(2*g)),y=O(e,m),b=O(n,m);for(y.length<=l&&y.push(0),b.push(0),g=b[f-1],i=l-f;i>=0;i--){for(r=d-1,y[i+f]!==g&&(r=Math.floor((y[i+f]*d+y[i+f-1])/g)),o=0,s=0,a=b.length,u=0;u<a;u++)o+=r*b[u],c=Math.floor(o/d),s+=y[i+u]-(o-c*d),o=c,s<0?(y[i+u]=s+d,s=-1):(y[i+u]=s,s=0);for(;0!==s;){for(r-=1,o=0,u=0;u<a;u++)(o+=y[i+u]-d+b[u])<0?(y[i+u]=o+d,o=0):(y[i+u]=o,o=1);s+=o}v[i]=r}return y=N(y,m)[0],[p(v),p(y)]}(g,m):function(e,t){for(var n,r,i,o,s,u=e.length,a=t.length,c=[],l=[];u;)if(l.unshift(e[--u]),d(l),x(l,t)<0)c.push(0);else{i=1e7*l[(r=l.length)-1]+l[r-2],o=1e7*t[a-1]+t[a-2],r>a&&(i=1e7*(i+1)),n=Math.ceil(i/o);do{if(x(s=O(t,n),l)<=0)break;n--}while(n);c.push(n),l=b(l,s)}return c.reverse(),[p(c),p(l)]}(g,m))[0];var k=e.sign!==i.sign,S=r[1],E=e.sign;return"number"==typeof l?(k&&(l=-l),l=new a(l)):l=new u(l,k),"number"==typeof S?(E&&(S=-S),S=new a(S)):S=new u(S,E),[l,S]}function x(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function C(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function R(e,t){for(var n,r,o,s=e.prev(),u=s,a=0;u.isEven();)u=u.divide(2),a++;e:for(r=0;r<t.length;r++)if(!e.lesser(t[r])&&!(o=i(t[r]).modPow(u,e)).isUnit()&&!o.equals(s)){for(n=a-1;0!=n;n--){if((o=o.square().mod(e)).isUnit())return!1;if(o.equals(s))continue e}return!1}return!0}u.prototype=Object.create(s.prototype),a.prototype=Object.create(s.prototype),c.prototype=Object.create(s.prototype),u.prototype.add=function(e){var t=J(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value,r=t.value;return t.isSmall?new u(y(n,Math.abs(r)),this.sign):new u(m(n,r),this.sign)},u.prototype.plus=u.prototype.add,a.prototype.add=function(e){var t=J(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());var r=t.value;if(t.isSmall){if(l(n+r))return new a(n+r);r=f(Math.abs(r))}return new u(y(r,Math.abs(n)),n<0)},a.prototype.plus=a.prototype.add,c.prototype.add=function(e){return new c(this.value+J(e).value)},c.prototype.plus=c.prototype.add,u.prototype.subtract=function(e){var t=J(e);if(this.sign!==t.sign)return this.add(t.negate());var n=this.value,r=t.value;return t.isSmall?_(n,Math.abs(r),this.sign):function(e,t,n){var r;return x(e,t)>=0?r=b(e,t):(r=b(t,e),n=!n),"number"==typeof(r=p(r))?(n&&(r=-r),new a(r)):new u(r,n)}(n,r,this.sign)},u.prototype.minus=u.prototype.subtract,a.prototype.subtract=function(e){var t=J(e),n=this.value;if(n<0!==t.sign)return this.add(t.negate());var r=t.value;return t.isSmall?new a(n-r):_(r,Math.abs(n),n>=0)},a.prototype.minus=a.prototype.subtract,c.prototype.subtract=function(e){return new c(this.value-J(e).value)},c.prototype.minus=c.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},a.prototype.negate=function(){var e=this.sign,t=new a(-this.value);return t.sign=!e,t},c.prototype.negate=function(){return new c(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},a.prototype.abs=function(){return new a(Math.abs(this.value))},c.prototype.abs=function(){return new c(this.value>=0?this.value:-this.value)},u.prototype.multiply=function(e){var n,r,i,o=J(e),a=this.value,c=o.value,l=this.sign!==o.sign;if(o.isSmall){if(0===c)return s[0];if(1===c)return this;if(-1===c)return this.negate();if((n=Math.abs(c))<t)return new u(O(a,n),l);c=f(n)}return r=a.length,i=c.length,new u(-.012*r-.012*i+15e-6*r*i>0?function e(t,n){var r=Math.max(t.length,n.length);if(r<=30)return w(t,n);r=Math.ceil(r/2);var i=t.slice(r),o=t.slice(0,r),s=n.slice(r),u=n.slice(0,r),a=e(o,u),c=e(i,s),l=e(m(o,i),m(u,s)),f=m(m(a,k(b(b(l,a),c),r)),k(c,2*r));return d(f),f}(a,c):w(a,c),l)},u.prototype.times=u.prototype.multiply,a.prototype._multiplyBySmall=function(e){return l(e.value*this.value)?new a(e.value*this.value):S(Math.abs(e.value),f(Math.abs(this.value)),this.sign!==e.sign)},u.prototype._multiplyBySmall=function(e){return 0===e.value?s[0]:1===e.value?this:-1===e.value?this.negate():S(Math.abs(e.value),this.value,this.sign!==e.sign)},a.prototype.multiply=function(e){return J(e)._multiplyBySmall(this)},a.prototype.times=a.prototype.multiply,c.prototype.multiply=function(e){return new c(this.value*J(e).value)},c.prototype.times=c.prototype.multiply,u.prototype.square=function(){return new u(E(this.value),!1)},a.prototype.square=function(){var e=this.value*this.value;return l(e)?new a(e):new u(E(f(Math.abs(this.value))),!1)},c.prototype.square=function(e){return new c(this.value*this.value)},u.prototype.divmod=function(e){var t=T(this,e);return{quotient:t[0],remainder:t[1]}},c.prototype.divmod=a.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(e){return T(this,e)[0]},c.prototype.over=c.prototype.divide=function(e){return new c(this.value/J(e).value)},a.prototype.over=a.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(e){return T(this,e)[1]},c.prototype.mod=c.prototype.remainder=function(e){return new c(this.value%J(e).value)},a.prototype.remainder=a.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(e){var t,n,r,i=J(e),o=this.value,u=i.value;if(0===u)return s[1];if(0===o)return s[0];if(1===o)return s[1];if(-1===o)return i.isEven()?s[1]:s[-1];if(i.sign)return s[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&l(t=Math.pow(o,u)))return new a(v(t));for(n=this,r=s[1];!0&u&&(r=r.times(n),--u),0!==u;)u/=2,n=n.square();return r},a.prototype.pow=u.prototype.pow,c.prototype.pow=function(e){var t=J(e),n=this.value,r=t.value,i=BigInt(0),o=BigInt(1),u=BigInt(2);if(r===i)return s[1];if(n===i)return s[0];if(n===o)return s[1];if(n===BigInt(-1))return t.isEven()?s[1]:s[-1];if(t.isNegative())return new c(i);for(var a=this,l=s[1];(r&o)===o&&(l=l.times(a),--r),r!==i;)r/=u,a=a.square();return l},u.prototype.modPow=function(e,t){if(e=J(e),(t=J(t)).isZero())throw new Error("Cannot take modPow with modulus 0");var n=s[1],r=this.mod(t);for(e.isNegative()&&(e=e.multiply(s[-1]),r=r.modInv(t));e.isPositive();){if(r.isZero())return s[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},c.prototype.modPow=a.prototype.modPow=u.prototype.modPow,u.prototype.compareAbs=function(e){var t=J(e),n=this.value,r=t.value;return t.isSmall?1:x(n,r)},a.prototype.compareAbs=function(e){var t=J(e),n=Math.abs(this.value),r=t.value;return t.isSmall?n===(r=Math.abs(r))?0:n>r?1:-1:-1},c.prototype.compareAbs=function(e){var t=this.value,n=J(e).value;return(t=t>=0?t:-t)===(n=n>=0?n:-n)?0:t>n?1:-1},u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=J(e),n=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:x(n,r)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,a.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=J(e),n=this.value,r=t.value;return t.isSmall?n==r?0:n>r?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},a.prototype.compareTo=a.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,n=J(e).value;return t===n?0:t>n?1:-1},c.prototype.compareTo=c.prototype.compare,u.prototype.equals=function(e){return 0===this.compare(e)},c.prototype.eq=c.prototype.equals=a.prototype.eq=a.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(e){return 0!==this.compare(e)},c.prototype.neq=c.prototype.notEquals=a.prototype.neq=a.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(e){return this.compare(e)>0},c.prototype.gt=c.prototype.greater=a.prototype.gt=a.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(e){return this.compare(e)<0},c.prototype.lt=c.prototype.lesser=a.prototype.lt=a.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},c.prototype.geq=c.prototype.greaterOrEquals=a.prototype.geq=a.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},c.prototype.leq=c.prototype.lesserOrEquals=a.prototype.leq=a.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return 0==(1&this.value[0])},a.prototype.isEven=function(){return 0==(1&this.value)},c.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return 1==(1&this.value[0])},a.prototype.isOdd=function(){return 1==(1&this.value)},c.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},a.prototype.isPositive=function(){return this.value>0},c.prototype.isPositive=a.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},a.prototype.isNegative=function(){return this.value<0},c.prototype.isNegative=a.prototype.isNegative,u.prototype.isUnit=function(){return!1},a.prototype.isUnit=function(){return 1===Math.abs(this.value)},c.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},a.prototype.isZero=function(){return 0===this.value},c.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(e){var t=J(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},c.prototype.isDivisibleBy=a.prototype.isDivisibleBy=u.prototype.isDivisibleBy,u.prototype.isPrime=function(e){var t=C(this);if(void 0!==t)return t;var n=this.abs(),r=n.bitLength();if(r<=64)return R(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var o=Math.log(2)*r.toJSNumber(),s=Math.ceil(!0===e?2*Math.pow(o,2):o),u=[],a=0;a<s;a++)u.push(i(a+2));return R(n,u)},c.prototype.isPrime=a.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(e,t){var n=C(this);if(void 0!==n)return n;for(var r=this.abs(),o=void 0===e?5:e,s=[],u=0;u<o;u++)s.push(i.randBetween(2,r.minus(2),t));return R(r,s)},c.prototype.isProbablePrime=a.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(e){for(var t,n,r,o=i.zero,s=i.one,u=J(e),a=this.abs();!a.isZero();)t=u.divide(a),n=o,r=u,o=s,u=a,s=n.subtract(t.multiply(s)),a=r.subtract(t.multiply(a));if(!u.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===o.compare(0)&&(o=o.add(e)),this.isNegative()?o.negate():o},c.prototype.modInv=a.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var e=this.value;return this.sign?_(e,1,this.sign):new u(y(e,1),this.sign)},a.prototype.next=function(){var e=this.value;return e+1<n?new a(e+1):new u(r,!1)},c.prototype.next=function(){return new c(this.value+BigInt(1))},u.prototype.prev=function(){var e=this.value;return this.sign?new u(y(e,1),!0):_(e,1,this.sign)},a.prototype.prev=function(){var e=this.value;return e-1>-n?new a(e-1):new u(r,!0)},c.prototype.prev=function(){return new c(this.value-BigInt(1))};for(var A=[1];2*A[A.length-1]<=t;)A.push(2*A[A.length-1]);var P=A.length,L=A[P-1];function j(e){return Math.abs(e)<=t}function M(e,t,n){t=J(t);for(var r=e.isNegative(),o=t.isNegative(),s=r?e.not():e,u=o?t.not():t,a=0,c=0,l=null,f=null,p=[];!s.isZero()||!u.isZero();)a=(l=T(s,L))[1].toJSNumber(),r&&(a=L-1-a),c=(f=T(u,L))[1].toJSNumber(),o&&(c=L-1-c),s=l[0],u=f[0],p.push(n(a,c));for(var d=0!==n(r?1:0,o?1:0)?i(-1):i(0),h=p.length-1;h>=0;h-=1)d=d.multiply(L).add(i(p[h]));return d}u.prototype.shiftLeft=function(e){var t=J(e).toJSNumber();if(!j(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var n=this;if(n.isZero())return n;for(;t>=P;)n=n.multiply(L),t-=P-1;return n.multiply(A[t])},c.prototype.shiftLeft=a.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(e){var t,n=J(e).toJSNumber();if(!j(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftLeft(-n);for(var r=this;n>=P;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=T(r,L))[1].isNegative()?t[0].prev():t[0],n-=P-1}return(t=T(r,A[n]))[1].isNegative()?t[0].prev():t[0]},c.prototype.shiftRight=a.prototype.shiftRight=u.prototype.shiftRight,u.prototype.not=function(){return this.negate().prev()},c.prototype.not=a.prototype.not=u.prototype.not,u.prototype.and=function(e){return M(this,e,(function(e,t){return e&t}))},c.prototype.and=a.prototype.and=u.prototype.and,u.prototype.or=function(e){return M(this,e,(function(e,t){return e|t}))},c.prototype.or=a.prototype.or=u.prototype.or,u.prototype.xor=function(e){return M(this,e,(function(e,t){return e^t}))},c.prototype.xor=a.prototype.xor=u.prototype.xor;function I(e){var n=e.value,r="number"==typeof n?n|1<<30:"bigint"==typeof n?n|BigInt(1<<30):n[0]+n[1]*t|1073758208;return r&-r}function D(e,t){return e=J(e),t=J(t),e.greater(t)?e:t}function F(e,t){return e=J(e),t=J(t),e.lesser(t)?e:t}function B(e,t){if(e=J(e).abs(),t=J(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,i=s[1];e.isEven()&&t.isEven();)n=F(I(e),I(t)),e=e.divide(n),t=t.divide(n),i=i.multiply(n);for(;e.isEven();)e=e.divide(I(e));do{for(;t.isEven();)t=t.divide(I(t));e.greater(t)&&(r=t,t=e,e=r),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}u.prototype.bitLength=function(){var e=this;return e.compareTo(i(0))<0&&(e=e.negate().subtract(i(1))),0===e.compareTo(i(0))?i(0):i(function e(t,n){if(n.compareTo(t)<=0){var r=e(t,n.square(n)),o=r.p,s=r.e,u=o.multiply(n);return u.compareTo(t)<=0?{p:u,e:2*s+1}:{p:o,e:2*s}}return{p:i(1),e:0}}(e,i(2)).e).add(i(1))},c.prototype.bitLength=a.prototype.bitLength=u.prototype.bitLength;var U=function(e,t,n,r){n=n||"0123456789abcdefghijklmnopqrstuvwxyz",e=String(e),r||(e=e.toLowerCase(),n=n.toLowerCase());var i,o=e.length,s=Math.abs(t),u={};for(i=0;i<n.length;i++)u[n[i]]=i;for(i=0;i<o;i++){if("-"!==(l=e[i])&&(l in u&&u[l]>=s)){if("1"===l&&1===s)continue;throw new Error(l+" is not a valid digit in base "+t+".")}}t=J(t);var a=[],c="-"===e[0];for(i=c?1:0;i<e.length;i++){var l;if((l=e[i])in u)a.push(J(u[l]));else{if("<"!==l)throw new Error(l+" is not a valid character");var f=i;do{i++}while(">"!==e[i]&&i<e.length);a.push(J(e.slice(f+1,i)))}}return q(a,t,c)};function q(e,t,n){var r,i=s[0],o=s[1];for(r=e.length-1;r>=0;r--)i=i.add(e[r].times(o)),o=o.times(t);return n?i.negate():i}function V(e,t){if((t=i(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}var r=!1;if(e.isNegative()&&t.isPositive()&&(r=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:r};for(var o,s=[],u=e;u.isNegative()||u.compareAbs(t)>=0;){o=u.divmod(t),u=o.quotient;var a=o.remainder;a.isNegative()&&(a=t.minus(a).abs(),u=u.next()),s.push(a.toJSNumber())}return s.push(u.toJSNumber()),{value:s.reverse(),isNegative:r}}function G(e,t,n){var r=V(e,t);return(r.isNegative?"-":"")+r.value.map((function(e){return function(e,t){return e<(t=t||"0123456789abcdefghijklmnopqrstuvwxyz").length?t[e]:"<"+e+">"}(e,n)})).join("")}function H(e){if(l(+e)){var t=+e;if(t===v(t))return o?new c(BigInt(t)):new a(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var r=e.split(/e/i);if(r.length>2)throw new Error("Invalid integer: "+r.join("e"));if(2===r.length){var i=r[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==v(i)||!l(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var s=r[0],f=s.indexOf(".");if(f>=0&&(i-=s.length-f-1,s=s.slice(0,f)+s.slice(f+1)),i<0)throw new Error("Cannot include negative exponent part for integers");e=s+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(o)return new c(BigInt(n?"-"+e:e));for(var p=[],h=e.length,g=h-7;h>0;)p.push(+e.slice(g,h)),(g-=7)<0&&(g=0),h-=7;return d(p),new u(p,n)}function J(e){return"number"==typeof e?function(e){if(o)return new c(BigInt(e));if(l(e)){if(e!==v(e))throw new Error(e+" is not an integer.");return new a(e)}return H(e.toString())}(e):"string"==typeof e?H(e):"bigint"==typeof e?new c(e):e}u.prototype.toArray=function(e){return V(this,e)},a.prototype.toArray=function(e){return V(this,e)},c.prototype.toArray=function(e){return V(this,e)},u.prototype.toString=function(e,t){if(void 0===e&&(e=10),10!==e)return G(this,e,t);for(var n,r=this.value,i=r.length,o=String(r[--i]);--i>=0;)n=String(r[i]),o+="0000000".slice(n.length)+n;return(this.sign?"-":"")+o},a.prototype.toString=function(e,t){return void 0===e&&(e=10),10!=e?G(this,e,t):String(this.value)},c.prototype.toString=a.prototype.toString,c.prototype.toJSON=u.prototype.toJSON=a.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,a.prototype.valueOf=function(){return this.value},a.prototype.toJSNumber=a.prototype.valueOf,c.prototype.valueOf=c.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var W=0;W<1e3;W++)s[W]=J(W),W>0&&(s[-W]=J(-W));return s.one=s[1],s.zero=s[0],s.minusOne=s[-1],s.max=D,s.min=F,s.gcd=B,s.lcm=function(e,t){return e=J(e).abs(),t=J(t).abs(),e.divide(B(e,t)).multiply(t)},s.isInstance=function(e){return e instanceof u||e instanceof a||e instanceof c},s.randBetween=function(e,n,r){e=J(e),n=J(n);var i=r||Math.random,o=F(e,n),u=D(e,n).subtract(o).add(1);if(u.isSmall)return o.add(Math.floor(i()*u));for(var a=V(u,t).value,c=[],l=!0,f=0;f<a.length;f++){var p=l?a[f]:t,d=v(i()*p);c.push(d),d<p&&(l=!1)}return o.add(s.fromArray(c,t,!1))},s.fromArray=function(e,t,n){return q(e.map(J),J(t||10),n)},s}();e.hasOwnProperty("exports")&&(e.exports=i),void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}).call(this,n(144)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}]);